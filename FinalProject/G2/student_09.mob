{"name": "FinalProject_G2_student_09", "author": "new_user", "flowchart": {"id": "41e0c84c-17da-0d80-8661-e1065bf077cb", "name": "FinalProject_G2_student_09", "description": "Inspired by the Pantheon in Rome, an oculus located at the apex of the Apple dome provides a flooding ray of light that travels through the space. The interior of the glass is lined with custom baffles, each uniquely shaped to counter sun angles and provide a nighttime lighting effect. \n\nThis model seeks inspiration from the grided dome of Apple Marina Bay Sands, exploring the forms created by altering the oculus depth and size. The model also generates sunshades in response to the Sun's position (as modified by the Sun's coordinates).", "language": "js", "meta": {"selected_nodes": [0]}, "nodes": [{"name": "Start", "id": "node_pwxglpvpd4", "position": {"x": 5420, "y": 4820}, "enabled": true, "type": "start", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 10, "ID": "prod-4rzbvmc1nfc", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "HEIGHT OF DOME\n\nadjusts the height of the entire dome model."}, "args": [{"name": "const_name", "value": "HEIGHT", "jsValue": "HEIGHT_"}, {"name": "__input__", "value": 160, "step": "10", "min": "100", "max": "200"}]}, {"type": 10, "ID": "prod-3rsiphyixyi", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "SIZE OF DOME BASE\n\nadjusts the radius of the base of the dome."}, "args": [{"name": "const_name", "value": "RADIUS_BASE", "jsValue": "RADIUS_BASE_"}, {"name": "__input__", "value": 70, "step": "5", "max": "100", "min": "30"}], "selectGeom": false}, {"type": 10, "ID": "prod-5ccn51ujvnm", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "SIZE OF OCULUS\n\nadjusts the oculus size, as a ratio to \"Size of Dome Base\"."}, "args": [{"name": "const_name", "value": "OCULUS_RAD", "jsValue": "OCULUS_RAD_"}, {"name": "__input__", "value": 0.1, "step": "0.1", "min": "0.1", "max": "3"}]}, {"type": 10, "ID": "prod-ayct0ygjhw", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "DEPTH OF OCULUS\n\nadjusts the depth of the oculus in reference to \"Height of Dome\"."}, "args": [{"name": "const_name", "value": "OCULUS_HEIGHT", "jsValue": "OCULUS_HEIGHT_"}, {"name": "__input__", "value": 0, "step": "10", "min": "-70", "max": "70"}], "selectGeom": false}, {"type": 10, "ID": "prod-ud0vxtmv09", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "NUMBER OF FRAME STRUCTURES\n\ndetermines the number of vertical frame structures around the dome."}, "args": [{"name": "const_name", "value": "NUM_STRUCTURES", "jsValue": "NUM_STRUCTURES_"}, {"name": "__input__", "value": 12, "step": "1", "min": "5", "max": "30"}]}, {"type": 10, "ID": "prod-99epkjp80mh", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "NUMBER OF PANEL ROWS\n\ndetermines the number of rows of glass panels between 2 frame structures."}, "args": [{"name": "const_name", "value": "PANELS_NUM", "jsValue": "PANELS_NUM_"}, {"name": "__input__", "value": 10, "step": "1", "min": "5", "max": "16"}], "selectGeom": false}, {"type": 10, "ID": "prod-g4abpidgguj", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "DISTORTION OF DOME\n\ndistorts the form of the dome model by enlarging its upper portion. Affects GFA."}, "args": [{"name": "const_name", "value": "DISTORTION", "jsValue": "DISTORTION_"}, {"name": "__input__", "value": 2, "step": "0.1", "min": "1", "max": "3"}]}, {"type": 10, "ID": "prod-uxy6n9nyeai", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 0, "description": "SUN COORDINATES\n\ndetermines sun position with reference to the dome."}, "args": [{"name": "const_name", "value": "SUN_COORD", "jsValue": "SUN_COORD_"}, {"name": "__input__", "value": "[400, -400, 150]", "jsValue": "[400, -400, 150]", "usedVars": []}], "selectGeom": false}, {"type": 10, "ID": "prod-hexf971xcah", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 6, "description": "SUN RESPONSIVENESS\n\nDetermines behaviour of baffles within the dome.\n\nResponsive: Baffles reacts to direction of sunlight.\nUnresponsive: Each baffle positioned parallel to ground."}, "args": [{"name": "const_name", "value": "BAFFLE_BEHAVIOR", "jsValue": "BAFFLE_BEHAVIOR_"}, {"name": "__input__", "value": "\"unresponsive\"", "max": "[\"responsive\", \"unresponsive\"]", "min": ["\"responsive\"", "\"unresponsive\""]}], "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": false, "show_func": false}, "input": {"name": "input", "type": 0, "edges": [], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0"}, "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0"], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "Dome", "id": "node_7tw3i9zqfax", "position": {"x": 5300, "y": 4940}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 0, "ID": "prod-axl31gl37vp", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "center_base", "jsValue": "center_base_"}, {"name": "value", "value": "[0, 0, 0]", "usedVars": [], "jsValue": "[0, 0, 0]"}], "variable": "center_base"}, {"type": 14, "ID": "prod-z2ybbmzcd", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create Base "}], "selectGeom": false}, {"type": 8, "ID": "prod-blmr67q50b6", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Arc"}, "argCount": 6, "args": [{"name": "var_name", "value": "dome_pos", "jsValue": "dome_pos_"}, {"name": "__model__"}, {"name": "origin", "value": "center_base", "usedVars": ["center_base"], "jsValue": "center_base_"}, {"name": "radius", "value": "RADIUS_BASE", "usedVars": ["RADIUS_BASE"], "jsValue": "RADIUS_BASE_"}, {"name": "num_positions", "value": "NUM_STRUCTURES + 1", "usedVars": ["NUM_STRUCTURES"], "jsValue": "NUM_STRUCTURES_ + 1"}, {"name": "arc_angle", "value": "PI * 2", "usedVars": [], "jsValue": "JSON.parse(JSON.stringify(PI)) * 2"}], "variable": "dome_pos", "terminate": false, "selectGeom": false}, {"type": 8, "ID": "prod-gyfj1szubih", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "base", "jsValue": "base_"}, {"name": "__model__"}, {"name": "entities", "value": "dome_pos", "usedVars": ["dome_pos"], "jsValue": "dome_pos_"}, {"name": "close", "value": "'close'", "jsValue": "'close'", "usedVars": []}], "variable": "base", "terminate": false, "selectGeom": false}, {"type": 14, "ID": "prod-phgkswksdxa", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Warp Base into a dome"}], "selectGeom": false}, {"type": 8, "ID": "prod-8lhp1he5vhl", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "ring_top", "jsValue": "ring_top_"}, {"name": "__model__"}, {"name": "entities", "value": "base", "usedVars": ["base"], "jsValue": "base_"}, {"name": "vector", "value": "[0, 0, HEIGHT]", "usedVars": ["HEIGHT"], "jsValue": "[0, 0, HEIGHT_]"}], "variable": "ring_top", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-owys5zmjjt", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Scale"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "ring_top", "usedVars": ["ring_top"], "jsValue": "ring_top_"}, {"name": "plane", "value": "center_base", "usedVars": ["center_base"], "jsValue": "center_base_"}, {"name": "scale", "value": "[DISTORTION, DISTORTION, 1]", "usedVars": ["DISTORTION"], "jsValue": "[DISTORTION_, DISTORTION_, 1]"}], "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-htkds9ja1il", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "ring_centre", "jsValue": "ring_centre_"}, {"name": "__model__"}, {"name": "entities", "value": "base", "usedVars": ["base"], "jsValue": "base_"}, {"name": "vector", "value": "[0, 0, HEIGHT + OCULUS_HEIGHT]", "usedVars": ["OCULUS_HEIGHT", "HEIGHT"], "jsValue": "[0, 0, HEIGHT_ + OCULUS_HEIGHT_]"}], "variable": "ring_centre", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-1r0x3ayt9cb", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Scale"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "ring_centre", "usedVars": ["ring_centre"], "jsValue": "ring_centre_"}, {"name": "plane", "value": "center_base", "usedVars": ["center_base"], "jsValue": "center_base_"}, {"name": "scale", "value": "[OCULUS_RAD, OCULUS_RAD, 1]", "usedVars": ["OCULUS_RAD"], "jsValue": "[OCULUS_RAD_, OCULUS_RAD_, 1]"}], "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-1p2wd0drx4a", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "strs", "jsValue": "strs_"}, {"name": "__model__"}, {"name": "entities", "value": "[base, ring_top, ring_centre]", "usedVars": ["base", "ring_top", "ring_centre"], "jsValue": "[base_, ring_top_, ring_centre_]"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_stringers'", "jsValue": "'open_stringers'", "usedVars": []}], "variable": "strs", "terminate": false, "selectGeom": false}, {"type": 0, "ID": "prod-f5q66snnsfn", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "crvs", "jsValue": "crvs_"}, {"name": "value", "value": "[]", "usedVars": [], "jsValue": "[]"}], "variable": "crvs", "selectGeom": false, "terminate": false}, {"type": 4, "ID": "prod-01yxc744gvk7", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "str", "jsValue": "str_"}, {"name": "list", "value": "strs", "usedVars": ["strs"], "jsValue": "strs_"}], "children": [{"type": 13, "ID": "prod-ekyac6at5al", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~procedure~12", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "ID": "prod-pnc3m16ypzc", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Nurbs"}, "argCount": 6, "args": [{"name": "var_name", "value": "nurbs_posis", "jsValue": "nurbs_posis_"}, {"name": "__model__"}, {"name": "coords", "usedVars": ["str"], "value": "str#ps @xyz", "jsValue": "__modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', str_), 'xyz')"}, {"name": "degree", "usedVars": [], "value": "2", "jsValue": "2"}, {"name": "close", "value": "'open'", "jsValue": "'open'", "usedVars": []}, {"name": "num_positions", "usedVars": ["PANELS_NUM"], "value": "PANELS_NUM + 1", "jsValue": "PANELS_NUM_ + 1"}], "variable": "nurbs_posis", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~procedure~12", "terminate": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~procedure~12", "ID": "prod-jb0h6u1iyt", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "nurbs_pline", "jsValue": "nurbs_pline_"}, {"name": "__model__"}, {"name": "entities", "value": "nurbs_posis", "usedVars": ["nurbs_posis"], "jsValue": "nurbs_posis_"}, {"name": "close", "value": "'open'", "jsValue": "'open'", "usedVars": []}], "variable": "nurbs_pline", "terminate": false, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~procedure~12", "ID": "prod-rbqgjumc2z", "enabled": true, "print": false, "meta": {"module": "list", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "list", "value": "crvs", "usedVars": ["crvs"], "jsValue": "crvs_"}, {"name": "item", "value": "nurbs_pline", "usedVars": ["nurbs_pline"], "jsValue": "nurbs_pline_"}, {"name": "method", "value": "'to_end'", "jsValue": "'to_end'", "usedVars": []}], "terminate": false, "selectGeom": false}], "variable": "str", "selectGeom": false}, {"type": 0, "ID": "prod-wkezit1fld", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "crvs@name", "jsValue": "crvs_@name", "usedVars": ["crvs"]}, {"name": "value", "value": "\"curve\"", "usedVars": [], "jsValue": "\"curve\""}], "variable": null, "selectGeom": false}, {"type": 8, "ID": "prod-oayy98bk5n", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[strs, ring_top, ring_centre, base]", "usedVars": ["base", "ring_top", "ring_centre", "strs"], "jsValue": "[strs_, ring_top_, ring_centre_, base_]"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "terminate": false, "selectGeom": false}, {"type": 8, "ID": "prod-oyt8ubrx2p8", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "rings", "jsValue": "rings_"}, {"name": "__model__"}, {"name": "entities", "value": "crvs", "usedVars": ["crvs"], "jsValue": "crvs_"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_stringers'", "jsValue": "'open_stringers'", "usedVars": []}], "variable": "rings", "terminate": false, "selectGeom": false}, {"type": 0, "ID": "prod-kyjv6f5tnvp", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "rings@name", "jsValue": "rings_@name", "usedVars": ["rings"]}, {"name": "value", "value": "\"ring\"", "usedVars": [], "jsValue": "\"ring\""}], "variable": null, "terminate": false}, {"type": 14, "ID": "prod-1h2tj97c3vq", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create collection"}], "selectGeom": false}, {"type": 8, "ID": "prod-zbmsz2aty8i", "enabled": true, "print": false, "meta": {"module": "collection", "name": "Create"}, "argCount": 4, "args": [{"name": "var_name", "value": "dome_coll", "jsValue": "dome_coll_"}, {"name": "__model__"}, {"name": "entities", "value": "[]", "usedVars": [], "jsValue": "[]"}, {"name": "name", "value": "\"dome\"", "usedVars": [], "jsValue": "\"dome\""}], "variable": "dome_coll", "selectGeom": false}, {"type": 8, "ID": "prod-gd8dz1n1pjk", "enabled": true, "print": false, "meta": {"module": "collection", "name": "Create"}, "argCount": 4, "args": [{"name": "var_name", "value": "crvs_coll", "jsValue": "crvs_coll_"}, {"name": "__model__"}, {"name": "entities", "value": "[]", "usedVars": [], "jsValue": "[]"}, {"name": "name", "value": "\"crvs\"", "usedVars": [], "jsValue": "\"crvs\""}], "variable": "crvs_coll", "selectGeom": false}, {"type": 8, "ID": "prod-if6qe2p95gq", "enabled": true, "print": false, "meta": {"module": "collection", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "coll", "value": "dome_coll", "usedVars": ["dome_coll"], "jsValue": "dome_coll_"}, {"name": "entities", "value": "rings", "usedVars": ["rings"], "jsValue": "rings_"}], "selectGeom": false}, {"type": 8, "ID": "prod-41hlvsvni5n", "enabled": true, "print": false, "meta": {"module": "collection", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "coll", "value": "dome_coll", "usedVars": ["dome_coll"], "jsValue": "dome_coll_"}, {"name": "entities", "value": "crvs_coll", "usedVars": ["crvs_coll"], "jsValue": "crvs_coll_"}], "selectGeom": false}, {"type": 8, "ID": "prod-612768mxsri", "enabled": true, "print": false, "meta": {"module": "collection", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "coll", "value": "crvs_coll", "usedVars": ["crvs_coll"], "jsValue": "crvs_coll_"}, {"name": "entities", "value": "crvs", "usedVars": ["crvs"], "jsValue": "crvs_"}], "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0"], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "Frame", "id": "node_mnn4hfmy4sp", "position": {"x": 5220, "y": 5120}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-p9184xzx8xh", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Keep crvs collection only."}], "selectGeom": false}, {"type": 8, "ID": "prod-agt5769kga", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#co ?@name==\"crvs\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'co', null), ['name', null], '==', \"crvs\")"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}], "terminate": false}, {"type": 14, "ID": "prod-5qp8bp30wsl", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Retrieve all polylines. Clean repeated lines."}], "selectGeom": false}, {"type": 8, "ID": "prod-x8a4t99h7sl", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pl[0]", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pl', null)[pythonList(0, __modules__.query.Get(__params__.model, 'pl', null).length)]"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "selectGeom": false}, {"type": 0, "ID": "prod-12vhn8j77mm8", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "crvs_pl", "jsValue": "crvs_pl_"}, {"name": "value", "value": "#pl", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pl', null)"}], "variable": "crvs_pl", "selectGeom": false}, {"type": 0, "ID": "prod-og4q2juxwdl", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "check", "jsValue": "check_"}, {"name": "value", "value": "crvs_pl", "usedVars": ["crvs_pl"], "jsValue": "crvs_pl_"}], "variable": "check"}, {"type": 14, "ID": "prod-dm2ci7pc5q7", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate normal vectors:"}], "selectGeom": false}, {"type": 4, "ID": "prod-mybpd0ilcec", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "pl", "jsValue": "pl_"}, {"name": "list", "value": "crvs_pl", "jsValue": "crvs_pl_", "usedVars": ["crvs_pl"]}], "children": [{"type": 13, "ID": "prod-2upyd20a3q6", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8", "ID": "prod-6xt36wzdfim", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "edges", "jsValue": "edges_"}, {"name": "value", "value": "pl#_e", "usedVars": ["pl"], "jsValue": "__modules__.query.Get(__params__.model, '_e', pl_)"}], "variable": "edges"}, {"type": 4, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8", "ID": "prod-z0did6s4id", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "edge", "jsValue": "edge_"}, {"name": "list", "value": "edges", "usedVars": ["edges"], "jsValue": "edges_"}], "children": [{"type": 13, "ID": "prod-z0did6s4id-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~2", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "ID": "prod-lpqt5wfcqje", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Normal"}, "argCount": 4, "args": [{"name": "var_name", "value": "pl_plane_nor", "jsValue": "pl_plane_nor_"}, {"name": "__model__"}, {"name": "entities", "value": "pl", "usedVars": ["pl"], "jsValue": "pl_"}, {"name": "scale", "value": "1", "usedVars": [], "jsValue": "1"}], "variable": "pl_plane_nor", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~2"}, {"type": 8, "ID": "prod-pfenfz648r", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Vector"}, "argCount": 3, "args": [{"name": "var_name", "value": "edge_vectors", "jsValue": "edge_vectors_"}, {"name": "__model__"}, {"name": "entities", "value": "edge", "usedVars": ["edge"], "jsValue": "edge_"}], "variable": "edge_vectors", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~2"}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~2", "ID": "prod-8tvyvmxiiwo", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "norm_vectors", "jsValue": "norm_vectors_"}, {"name": "value", "value": "vecCross(pl_plane_nor, edge_vectors)", "usedVars": ["pl_plane_nor", "edge_vectors"], "jsValue": "vecCross(__debug__, pl_plane_nor_, edge_vectors_)"}], "variable": "norm_vectors", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~2", "ID": "prod-xv27mrz0nwl", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "edge@nor", "jsValue": "edge_@nor", "usedVars": ["edge"]}, {"name": "value", "usedVars": ["norm_vectors"], "value": "norm_vectors", "jsValue": "norm_vectors_"}], "variable": null, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~2", "ID": "prod-gi65v2spplf", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Centroid"}, "argCount": 4, "args": [{"name": "var_name", "value": "cen", "jsValue": "cen_"}, {"name": "__model__"}, {"name": "entities", "value": "edge", "usedVars": ["edge"], "jsValue": "edge_"}, {"name": "method", "value": "'ps_average'", "usedVars": [], "jsValue": "'ps_average'"}], "variable": "cen", "selectGeom": false, "terminate": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~2", "ID": "prod-ayvxz69fqnf", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Ray"}, "argCount": 4, "args": [{"name": "var_name", "value": "vis", "jsValue": "vis_"}, {"name": "__model__"}, {"name": "rays", "value": "rayMake(cen, edge@nor )", "usedVars": ["cen", "edge"], "jsValue": "rayMake(__debug__, cen_,  __modules__.attrib.Get(__params__.model, edge_, 'nor'))"}, {"name": "scale", "value": "0.2", "usedVars": [], "jsValue": "0.2"}], "variable": "vis", "selectGeom": false, "terminate": false}], "variable": "edge"}, {"type": 14, "ID": "prod-rahtdrr1jvi", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Push the normal from the edges to the positions"}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8"}, {"type": 8, "ID": "prod-prm53ynky7s", "enabled": true, "print": false, "meta": {"module": "attrib", "name": "Push"}, "argCount": 6, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "edges", "usedVars": ["edges"], "jsValue": "edges_"}, {"name": "attrib", "value": "\"nor\"", "usedVars": [], "jsValue": "\"nor\""}, {"name": "ent_type_sel", "value": "'ps'", "jsValue": "'ps'", "usedVars": []}, {"name": "method_sel", "value": "'average'", "jsValue": "'average'", "usedVars": []}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8", "ID": "prod-oeaa5ngxle", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Move the arc positions in the direction of the normals"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8", "ID": "prod-5prd0unu4nl", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "posis", "jsValue": "posis_"}, {"name": "value", "value": "pl#ps", "usedVars": ["pl"], "jsValue": "__modules__.query.Get(__params__.model, 'ps', pl_)"}], "variable": "posis", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8", "ID": "prod-xyxda02y4hj", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "normals", "jsValue": "normals_"}, {"name": "value", "value": "posis@nor", "usedVars": ["posis"], "jsValue": "__modules__.attrib.Get(__params__.model, posis_, 'nor')"}], "variable": "normals", "selectGeom": false}], "variable": "pl", "selectGeom": false}, {"type": 14, "ID": "prod-1tzzruwq5s", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate frames."}]}, {"type": 18, "ID": "prod-f6u4qs9865h", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "localFunc", "name": "MakeFrame"}, "args": [{"name": "var_name", "value": "frames", "jsValue": "frames_"}, {"name": "plines", "usedVars": ["crvs_pl"], "value": "crvs_pl", "jsValue": "crvs_pl_"}], "selectGeom": false, "variable": "frames"}, {"type": 14, "ID": "prod-2sspyhxll3", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add name attribute \"frame\" to frame polygons."}]}, {"type": 0, "ID": "prod-mllsbwedya", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "frames@name", "jsValue": "frames_@name", "usedVars": ["frames"]}, {"name": "value", "value": "\"frame\"", "usedVars": [], "jsValue": "\"frame\""}], "variable": null, "selectGeom": false}, {"type": 14, "ID": "prod-xm3vxekeyl", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up."}]}, {"type": 8, "ID": "prod-ui19n5h9h5e", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pg", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pg', null)"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}]}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 16, "ID": "prod-flxd4cendpw", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "", "name": "", "otherInfo": {"prev_name": "MakeFrame", "num_returns": 1, "collapsed": true}}, "args": [{"name": "func_name", "value": "MakeFrame", "jsValue": "MakeFrame_"}, {"name": "arg_1", "value": "plines", "jsValue": "plines_", "usedVars": ["plines"]}], "children": [{"type": 13, "ID": "prod-xdf4zmyr", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "ID": "prod-34pl0igu3pi", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Rectangle"}, "argCount": 4, "args": [{"name": "var_name", "value": "rec", "jsValue": "rec_"}, {"name": "__model__"}, {"name": "origin", "value": "[-1, 0, 0]", "usedVars": [], "jsValue": "[-1, 0, 0]"}, {"name": "size", "value": "[3, 0.5]", "usedVars": [], "jsValue": "[3, 0.5]"}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "variable": "rec", "terminate": false}, {"type": 8, "ID": "prod-no0nvuiuyvb", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "xsec", "jsValue": "xsec_"}, {"name": "__model__"}, {"name": "entities", "value": "rec", "usedVars": ["rec"], "jsValue": "rec_"}, {"name": "close", "value": "'close'", "jsValue": "'close'", "usedVars": []}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "variable": "xsec", "terminate": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-v17aq2am9g", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "frames", "jsValue": "frames_"}, {"name": "value", "value": "[]", "usedVars": [], "jsValue": "[]"}], "variable": "frames", "selectGeom": false}, {"type": 4, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-ketp0uhjayg", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "pline", "jsValue": "pline_"}, {"name": "list", "value": "plines", "usedVars": ["plines"], "jsValue": "plines_"}], "children": [{"type": 13, "ID": "prod-c7wygoqs0n", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~4", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~4", "ID": "prod-0n9c3z42v96", "enabled": true, "print": false, "meta": {"module": "make", "name": "Sweep"}, "argCount": 6, "args": [{"name": "var_name", "value": "frame", "jsValue": "frame_"}, {"name": "__model__"}, {"name": "entities", "value": "pline", "usedVars": ["pline"], "jsValue": "pline_"}, {"name": "xsextion", "value": "xsec", "usedVars": ["xsec"], "jsValue": "xsec_"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'quads'", "jsValue": "'quads'", "usedVars": []}], "variable": "frame", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~4", "ID": "prod-4825j2qmefv", "enabled": true, "print": false, "meta": {"module": "list", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "list", "value": "frames", "usedVars": ["frames"], "jsValue": "frames_"}, {"name": "item", "value": "frame", "usedVars": ["frame"], "jsValue": "frame_"}, {"name": "method", "value": "'to_end'", "jsValue": "'to_end'", "usedVars": []}], "selectGeom": false}], "variable": "pline", "selectGeom": false}, {"type": 17, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-bfv17cosetl", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "Value", "value": "frames", "usedVars": ["frames"], "jsValue": "frames_"}], "selectGeom": false}], "variable": null, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", {"source": {"name": "output", "type": 1, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1"], "meta": {"mode": 0}, "parentNode": {"name": "Base", "id": "node_74fshk28xke", "position": {"x": 4980, "y": 5120}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 0, "ID": "prod-pdx2xfjkwtd", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "step", "jsValue": "step_"}, {"name": "value", "value": "10", "jsValue": "10", "usedVars": []}], "variable": "step", "selectGeom": false}, {"type": 14, "ID": "prod-grt278ox0ff", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Make planes"}], "selectGeom": false}, {"type": 8, "ID": "prod-wm9teizujt", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Arc"}, "argCount": 6, "args": [{"name": "var_name", "value": "base_top_pl", "jsValue": "base_top_pl_"}, {"name": "__model__"}, {"name": "origin", "value": "XY", "jsValue": "JSON.parse(JSON.stringify(XY))", "usedVars": []}, {"name": "radius", "value": "RADIUS_BASE", "jsValue": "RADIUS_BASE_", "usedVars": ["RADIUS_BASE"]}, {"name": "num_positions", "value": "100", "jsValue": "100", "usedVars": []}, {"name": "arc_angle", "value": "null", "jsValue": "null", "usedVars": []}], "variable": "base_top_pl", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-ex4gxbf6fef", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polygon"}, "argCount": 3, "args": [{"name": "var_name", "value": "base_top", "jsValue": "base_top_"}, {"name": "__model__"}, {"name": "entities", "value": "base_top_pl", "jsValue": "base_top_pl_", "usedVars": ["base_top_pl"]}], "variable": "base_top", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-3x6wi1km4ni", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "base_top", "jsValue": "base_top_", "usedVars": ["base_top"]}, {"name": "vectors", "value": "[0, 0, -step]", "jsValue": "[0, 0, -step_]", "usedVars": ["step"]}], "selectGeom": false, "terminate": false}, {"type": 14, "ID": "prod-t3m6jpwioaj", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Extrude planes"}], "selectGeom": false}, {"type": 8, "ID": "prod-rnerp21avzb", "enabled": true, "print": false, "meta": {"module": "make", "name": "Extrude"}, "argCount": 6, "args": [{"name": "var_name", "value": "top_extrude", "jsValue": "top_extrude_"}, {"name": "__model__"}, {"name": "entities", "value": "base_top", "jsValue": "base_top_", "usedVars": ["base_top"]}, {"name": "distance", "value": "step", "jsValue": "step_", "usedVars": ["step"]}, {"name": "divisions", "value": "1", "jsValue": "1", "usedVars": []}, {"name": "method", "value": "'quads'", "jsValue": "'quads'", "usedVars": []}], "variable": "top_extrude", "selectGeom": false}, {"type": 14, "ID": "prod-b4w9heifrcl", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add attribute name \"base\" to base polygons."}]}, {"type": 0, "ID": "prod-j8p5ui2r9", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "top_extrude@name", "jsValue": "top_extrude_@name", "usedVars": ["top_extrude"]}, {"name": "value", "value": "\"base\"", "usedVars": [], "jsValue": "\"base\""}], "variable": null}, {"type": 0, "ID": "prod-jzofhklxrwn", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "base_top@name", "jsValue": "base_top_@name", "usedVars": ["base_top"]}, {"name": "value", "value": "\"base\"", "usedVars": [], "jsValue": "\"base\""}], "variable": null, "selectGeom": false}, {"type": 14, "ID": "prod-4qyl6mhbr7c", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up."}]}, {"type": 8, "ID": "prod-4wvdc5addwy", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pg ?@name==\"base\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['name', null], '==', \"base\")"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}], "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": {"name": "input", "type": 0, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output", "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode"}, "output": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source", "hasError": false, "hasExecuted": true, "model": 6}}, "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "selected": false}, {"source": {"name": "output", "type": 1, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2"], "meta": {"mode": 0}, "parentNode": {"name": "Floor", "id": "node_jl33ux5rvt", "position": {"x": 5100, "y": 5120}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-vg1x1148pi", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Retrieve all Dome ring polylines."}], "selectGeom": false}, {"type": 0, "ID": "prod-xn78qsex", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "rings", "jsValue": "rings_"}, {"name": "value", "value": "#pl ?@name==\"ring\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['name', null], '==', \"ring\")"}], "variable": "rings", "selectGeom": false, "terminate": false}, {"type": 14, "ID": "prod-6z3w0ztqkra", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Retrieve all Dome curve polylines under new list called \"ground_pl\"."}]}, {"type": 0, "ID": "prod-puxjzx16jw", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "ground_pl", "jsValue": "ground_pl_"}, {"name": "value", "value": "#pl ?@name==\"curve\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['name', null], '==', \"curve\")"}], "variable": "ground_pl", "selectGeom": false, "terminate": false}, {"type": 14, "ID": "prod-wznq1tgxjoc", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add lowest two rings to list."}]}, {"type": 8, "ID": "prod-yguxedsn2i", "enabled": true, "print": false, "meta": {"module": "list", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "list", "value": "ground_pl", "usedVars": ["ground_pl"], "jsValue": "ground_pl_"}, {"name": "item", "value": "rings[0]", "usedVars": ["rings"], "jsValue": "rings_[pythonList(0, rings_.length)]"}, {"name": "method", "value": "'to_start'", "jsValue": "'to_start'", "usedVars": []}], "terminate": false, "selectGeom": false}, {"type": 8, "ID": "prod-nrbvn59v5g", "enabled": true, "print": false, "meta": {"module": "list", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "list", "value": "ground_pl", "usedVars": ["ground_pl"], "jsValue": "ground_pl_"}, {"name": "item", "value": "rings[1]", "usedVars": ["rings"], "jsValue": "rings_[pythonList(1, rings_.length)]"}, {"name": "method", "value": "'to_start'", "jsValue": "'to_start'", "usedVars": []}], "terminate": false, "selectGeom": false}, {"type": 14, "ID": "prod-e1yewxex20u", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create floor base polygons."}]}, {"type": 8, "ID": "prod-jazunt3ykbr", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polygon"}, "argCount": 3, "args": [{"name": "var_name", "value": "floor", "jsValue": "floor_"}, {"name": "__model__"}, {"name": "entities", "value": "ground_pl", "usedVars": ["ground_pl"], "jsValue": "ground_pl_"}], "variable": "floor", "selectGeom": false, "terminate": false}, {"type": 14, "ID": "prod-u8d9fkpvxo", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up: keep only the horizontal planes."}]}, {"type": 8, "ID": "prod-rzfrkwva7cr", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[floor[0], floor[1]]", "usedVars": ["floor"], "jsValue": "[floor_[pythonList(0, floor_.length)], floor_[pythonList(1, floor_.length)]]"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}], "selectGeom": false}, {"type": 14, "ID": "prod-3k81apydrbw", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create floor polygons."}]}, {"type": 8, "ID": "prod-m43jts11sd", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "floor_pg", "jsValue": "floor_pg_"}, {"name": "__model__"}, {"name": "entities", "value": "#pg", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pg', null)"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_quads'", "jsValue": "'open_quads'", "usedVars": []}], "variable": "floor_pg"}, {"type": 8, "ID": "prod-irmwmezckg", "enabled": true, "print": false, "meta": {"module": "list", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "list", "value": "floor_pg", "usedVars": ["floor_pg"], "jsValue": "floor_pg_"}, {"name": "item", "value": "floor[0]", "usedVars": ["floor"], "jsValue": "floor_[pythonList(0, floor_.length)]"}, {"name": "method", "value": "'to_start'", "jsValue": "'to_start'", "usedVars": []}]}, {"type": 8, "ID": "prod-db72zoisxei", "enabled": true, "print": false, "meta": {"module": "list", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "list", "value": "floor_pg", "usedVars": ["floor_pg"], "jsValue": "floor_pg_"}, {"name": "item", "value": "floor[1]", "usedVars": ["floor"], "jsValue": "floor_[pythonList(1, floor_.length)]"}, {"name": "method", "value": "'to_start'", "jsValue": "'to_start'", "usedVars": []}], "selectGeom": false, "terminate": false}, {"type": 14, "ID": "prod-dbvz2fp1ow8", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add atttribute name \"floor\" to floor polygons."}]}, {"type": 0, "ID": "prod-jvh42jhpaq", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "floor_pg@name", "jsValue": "floor_pg_@name", "usedVars": ["floor_pg"]}, {"name": "value", "value": "\"floor\"", "usedVars": [], "jsValue": "\"floor\""}], "variable": null}, {"type": 14, "ID": "prod-tbh48dn6g3e", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up."}]}, {"type": 8, "ID": "prod-r9iql3rg6lf", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "floor_pg[-1]", "usedVars": ["floor_pg"], "jsValue": "floor_pg_[pythonList(-1, floor_pg_.length)]"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "selectGeom": false}, {"type": 8, "ID": "prod-7wt891wjwe7", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pg ?@name==\"floor\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['name', null], '==', \"floor\")"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}], "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": {"name": "input", "type": 0, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output", "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~input", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode"}, "output": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source", "hasError": false, "hasExecuted": true, "model": 7}}, "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "Colour", "id": "node_4tqyw8tyz05", "position": {"x": 5100, "y": 5260}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 0, "ID": "prod-nqqsmqpxwqr", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "frames", "jsValue": "frames_"}, {"name": "value", "value": "#pg ?@name==\"frame\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['name', null], '==', \"frame\")"}], "variable": "frames"}, {"type": 0, "ID": "prod-1ck6b0cs8e4h", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "base", "jsValue": "base_"}, {"name": "value", "value": "#pg ?@name==\"base\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['name', null], '==', \"base\")"}], "variable": "base", "selectGeom": false}, {"type": 0, "ID": "prod-yxqmsjh8cnf", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "floor", "jsValue": "floor_"}, {"name": "value", "value": "#pg ?@name==\"floor\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['name', null], '==', \"floor\")"}], "variable": "floor", "selectGeom": false}, {"type": 8, "ID": "prod-bdh1of08kve", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Color"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[frames, base, floor]", "usedVars": ["frames", "base", "floor"], "jsValue": "[frames_, base_, floor_]"}, {"name": "color", "value": "[0.25, 0.25, 0.25]", "usedVars": [], "jsValue": "[0.25, 0.25, 0.25]"}], "terminate": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", {"source": {"name": "output", "type": 1, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1"], "meta": {"mode": 0}, "parentNode": {"name": "Baffles", "id": "node_ufatx5hiue", "position": {"x": 5480, "y": 5120}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-srjb366v89k", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Get polylines for glass panels."}], "selectGeom": false}, {"type": 8, "ID": "prod-8dgob87audq", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[#co ?@name==\"crvs\" ]", "usedVars": [], "jsValue": "[ __modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'co', null), ['name', null], '==', \"crvs\")]"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}], "terminate": false, "selectGeom": false}, {"type": 14, "ID": "prod-hz8vtglma3s", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Make copies of Dome polylines."}]}, {"type": 8, "ID": "prod-nat68ec6ckk", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "baffle_pl", "jsValue": "baffle_pl_"}, {"name": "__model__"}, {"name": "entities", "value": "#pl", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pl', null)"}, {"name": "vector", "value": "[0, 0, 0]", "usedVars": [], "jsValue": "[0, 0, 0]"}], "variable": "baffle_pl", "terminate": false}, {"type": 14, "ID": "prod-c81v0estfio", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Scale down copied polylines so that baffles are within glass dome."}]}, {"type": 8, "ID": "prod-pc33qwdn6h", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Scale"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "baffle_pl", "usedVars": ["baffle_pl"], "jsValue": "baffle_pl_"}, {"name": "plane", "value": "XY", "usedVars": [], "jsValue": "JSON.parse(JSON.stringify(XY))"}, {"name": "scale", "value": "0.95", "usedVars": [], "jsValue": "0.95"}], "terminate": false}, {"type": 14, "ID": "prod-cvybtzvis5f", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Loft to create baffles; unweld."}]}, {"type": 8, "ID": "prod-35q2er6guyy", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "baffles", "jsValue": "baffles_"}, {"name": "__model__"}, {"name": "entities", "value": "baffle_pl", "usedVars": ["baffle_pl"], "jsValue": "baffle_pl_"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_quads'", "jsValue": "'open_quads'", "usedVars": []}], "variable": "baffles", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-3bq17qtiylv", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Weld"}, "argCount": 4, "args": [{"name": "var_name", "value": "baffles_unweld", "jsValue": "baffles_unweld_"}, {"name": "__model__"}, {"name": "entities", "value": "baffles", "usedVars": ["baffles"], "jsValue": "baffles_"}, {"name": "method", "value": "'break_weld'", "jsValue": "'break_weld'", "usedVars": []}], "variable": "baffles_unweld", "selectGeom": false}, {"type": 14, "ID": "prod-z3z7ya4rj2", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up: delete all polylines."}], "selectGeom": false}, {"type": 8, "ID": "prod-einu56ihq2", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pl", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pl', null)"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "terminate": false, "selectGeom": false}, {"type": 14, "ID": "prod-lphrtok7oqo", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Delete the lowest 2 rows of panels."}]}, {"type": 4, "ID": "prod-b2r4x7wnjl7", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "i", "jsValue": "i_"}, {"name": "list", "value": "range(len(baffles))", "usedVars": ["baffles"], "jsValue": "range(__debug__, len(__debug__, baffles_))"}], "children": [{"type": 13, "ID": "prod-b2r4x7wnjl7-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~13", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 1, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~13", "ID": "prod-s5ulqykevvp", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "i % (PANELS_NUM) == 0", "usedVars": ["PANELS_NUM", "i"], "jsValue": "i_ % (PANELS_NUM_) == 0"}], "children": [{"type": 13, "ID": "prod-s5ulqykevvp-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~13~children~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~13~children~1", "ID": "prod-kbfryiwzico", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[baffles[i], baffles[i + 1]]", "usedVars": ["baffles", "i"], "jsValue": "[baffles_[pythonList(i_, baffles_.length)], baffles_[pythonList(i_ + 1, baffles_.length)]]"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "terminate": false}]}], "variable": "i"}, {"type": 14, "ID": "prod-rlls5xhx9a", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "**Responsiveness to Sun: if baffle facing sun -- angles towards sun; if not, parallel to ground. "}]}, {"type": 14, "ID": "prod-6agg9kzs7u2", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "**PREVENT OVERLAPPING/INTERSECTING GEOMETRIES:"}]}, {"type": 14, "ID": "prod-jajajssebzc", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create new list \"move_baffles\" for responding baffles (applicable when oculus depth <0; when >0, all baffles respond."}], "selectGeom": false}, {"type": 0, "ID": "prod-sl384yrd0wq", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "move_baffles", "jsValue": "move_baffles_"}, {"name": "value", "value": "[]", "usedVars": [], "jsValue": "[]"}], "variable": "move_baffles", "selectGeom": false, "terminate": false}, {"type": 4, "ID": "prod-7fh9xdznfgk", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "baffle", "jsValue": "baffle_"}, {"name": "list", "value": "baffles#pg", "usedVars": ["baffles"], "jsValue": "__modules__.query.Get(__params__.model, 'pg', baffles_)"}], "children": [{"type": 13, "ID": "prod-hynfvx65185", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-sapzi4q1g5h", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Caluclate vector of verticle edge of each baffle."}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-85v07vxl9p3", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "vert_edg", "jsValue": "vert_edg_"}, {"name": "value", "value": "baffle#_e[0]", "usedVars": ["baffle"], "jsValue": "__modules__.query.Get(__params__.model, '_e', baffle_)[pythonList(0, __modules__.query.Get(__params__.model, '_e', baffle_).length)]"}], "variable": "vert_edg", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-40l98sgpajt", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Vector"}, "argCount": 3, "args": [{"name": "var_name", "value": "edg_vec", "jsValue": "edg_vec_"}, {"name": "__model__"}, {"name": "entities", "value": "vert_edg", "usedVars": ["vert_edg"], "jsValue": "vert_edg_"}], "variable": "edg_vec", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-i3ynmxqg86o", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate vector for bottom edge of each baffle."}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-98ohumq43ok", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "bottom_edg", "jsValue": "bottom_edg_"}, {"name": "value", "value": "baffle#_e[3]", "usedVars": ["baffle"], "jsValue": "__modules__.query.Get(__params__.model, '_e', baffle_)[pythonList(3, __modules__.query.Get(__params__.model, '_e', baffle_).length)]"}], "variable": "bottom_edg", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-3sj8jpsbpo", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Vector"}, "argCount": 3, "args": [{"name": "var_name", "value": "bottom_edg_vec", "jsValue": "bottom_edg_vec_"}, {"name": "__model__"}, {"name": "entities", "value": "bottom_edg", "usedVars": ["bottom_edg"], "jsValue": "bottom_edg_"}], "variable": "bottom_edg_vec", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-qt9u4foi4tn", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate the smaller angle between each vertical edge and Z-axis."}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-bbnhfvz978", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "angle_z_edg", "jsValue": "angle_z_edg_"}, {"name": "value", "value": "vecAng([0, 0, 1], edg_vec)", "usedVars": ["edg_vec"], "jsValue": "vecAng(__debug__, [0, 0, 1], edg_vec_)"}], "variable": "angle_z_edg", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-orkf18ohtsd", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "(when oculus depth < 0, angle_z_edg < PI/2)"}]}, {"type": 14, "ID": "prod-ep54bcvh2mk", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "**Prevent parallel baffles near oculus from intersecting glass panels when oculus depth <0, oculus size <1 (torus-shaped):"}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18"}, {"type": 1, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-hb66w0daxhi", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "angle_z_edg < PI / 2", "usedVars": ["angle_z_edg"], "jsValue": "angle_z_edg_ < JSON.parse(JSON.stringify(PI)) / 2"}], "children": [{"type": 13, "ID": "prod-s0v43a1pqos", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18~children~11", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18~children~11", "ID": "prod-cxnt1w67r15", "enabled": true, "print": false, "meta": {"module": "list", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "list", "value": "move_baffles", "usedVars": ["move_baffles"], "jsValue": "move_baffles_"}, {"name": "item", "value": "baffle", "usedVars": ["baffle"], "jsValue": "baffle_"}, {"name": "method", "value": "'extend_end'", "jsValue": "'extend_end'", "usedVars": []}], "selectGeom": false}], "selectGeom": false}, {"type": 14, "ID": "prod-gx48bjcv1p7", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "**Prevent baffles from intersecting glass panels when oculus depth <0, oculus size ratio > 1 (trumpet-shaped):"}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18"}, {"type": 1, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18", "ID": "prod-ma52dwnx6mg", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "OCULUS_RAD > 1", "usedVars": ["OCULUS_RAD"], "jsValue": "OCULUS_RAD_ > 1"}], "children": [{"type": 13, "ID": "prod-ma52dwnx6mg-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18~children~13", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 1, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18~children~13", "ID": "prod-zh50z73br4a", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "angle_z_edg >= PI / 3", "usedVars": ["angle_z_edg"], "jsValue": "angle_z_edg_ >= JSON.parse(JSON.stringify(PI)) / 3"}], "children": [{"type": 13, "ID": "prod-zh50z73br4a-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18~children~13~children~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~18~children~13~children~1", "ID": "prod-vnm9r5flmlp", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "baffle", "usedVars": ["baffle"], "jsValue": "baffle_"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "selectGeom": false}]}]}], "variable": "baffle", "selectGeom": false}, {"type": 14, "ID": "prod-g4arz1nj2us", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Implement Responsiveness to Sun:"}]}, {"type": 4, "ID": "prod-smsfg2tg658", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "baffle", "jsValue": "baffle_"}, {"name": "list", "value": "move_baffles#pg", "jsValue": "__modules__.query.Get(__params__.model, 'pg', move_baffles_)", "usedVars": ["move_baffles"]}], "children": [{"type": 13, "ID": "prod-74me16ucj2n", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-l528whgmi5", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate normal and centroid for each polygon."}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-bz5vudm7g0l", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Normal"}, "argCount": 4, "args": [{"name": "var_name", "value": "norm", "jsValue": "norm_"}, {"name": "__model__"}, {"name": "entities", "value": "baffle", "usedVars": ["baffle"], "jsValue": "baffle_"}, {"name": "scale", "value": "1", "usedVars": [], "jsValue": "1"}], "variable": "norm"}, {"type": 8, "ID": "prod-8hih4z6kps", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Centroid"}, "argCount": 4, "args": [{"name": "var_name", "value": "baffle_cen", "jsValue": "baffle_cen_"}, {"name": "__model__"}, {"name": "entities", "value": "baffle", "usedVars": ["baffle"], "jsValue": "baffle_"}, {"name": "method", "value": "'ps_average'", "jsValue": "'ps_average'", "usedVars": []}], "variable": "baffle_cen", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-4k7aqm5uow7", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create a unit vector from the centroid of the module to the sun."}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-g2ih1lj32l8", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "sun_vec", "jsValue": "sun_vec_"}, {"name": "value", "value": "vecNorm(vecSub(SUN_COORD, baffle_cen))", "jsValue": "vecNorm(__debug__, vecSub(__debug__, SUN_COORD_, baffle_cen_))", "usedVars": ["SUN_COORD", "baffle_cen"]}], "variable": "sun_vec", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-bqglrf1aijn", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "FOR VERTICAL EDGES:"}]}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-h5ffrmc3i7", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate vector for vertical edge of each baffle."}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-izwjyrt4l1g", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "vert_edg", "jsValue": "vert_edg_"}, {"name": "value", "value": "baffle#_e[0]", "usedVars": ["baffle"], "jsValue": "__modules__.query.Get(__params__.model, '_e', baffle_)[pythonList(0, __modules__.query.Get(__params__.model, '_e', baffle_).length)]"}], "variable": "vert_edg"}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-2di5nwafpcg", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Vector"}, "argCount": 3, "args": [{"name": "var_name", "value": "edg_vec", "jsValue": "edg_vec_"}, {"name": "__model__"}, {"name": "entities", "value": "vert_edg", "usedVars": ["vert_edg"], "jsValue": "vert_edg_"}], "variable": "edg_vec", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-dat5zgjownl", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "FOR BOTTOM EDGES:"}]}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-7sk7h7udquk", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate vector for bottom edge of each baffle,"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-po02v47ki8", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "bottom_edg", "jsValue": "bottom_edg_"}, {"name": "value", "value": "baffle#_e[3]", "usedVars": ["baffle"], "jsValue": "__modules__.query.Get(__params__.model, '_e', baffle_)[pythonList(3, __modules__.query.Get(__params__.model, '_e', baffle_).length)]"}], "variable": "bottom_edg", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-xrih8m6nkzh", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Vector"}, "argCount": 3, "args": [{"name": "var_name", "value": "bottom_edg_vec", "jsValue": "bottom_edg_vec_"}, {"name": "__model__"}, {"name": "entities", "value": "bottom_edg", "usedVars": ["bottom_edg"], "jsValue": "bottom_edg_"}], "variable": "bottom_edg_vec", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-1py70frpj2n", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Set length of bottom_edg_vec to 1; Calulate ray for bottom edge."}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-mj0b59j3dxi", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "bottom_edg_nor", "jsValue": "bottom_edg_nor_"}, {"name": "value", "value": "vecNorm(bottom_edg)", "usedVars": ["bottom_edg"], "jsValue": "vecNorm(__debug__, bottom_edg_)"}], "variable": "bottom_edg_nor", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-0w2g7hf2elnp", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Ray"}, "argCount": 3, "args": [{"name": "var_name", "value": "bottom_edg_ray", "jsValue": "bottom_edg_ray_"}, {"name": "__model__"}, {"name": "entities", "value": "bottom_edg", "usedVars": ["bottom_edg"], "jsValue": "bottom_edg_"}], "variable": "bottom_edg_ray", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-rs8snh79g3", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate dot product of sun_vec and edg_vec -- i.e. cos(angle)"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-bi6shvcp47a", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "dot_sun_norm", "jsValue": "dot_sun_norm_"}, {"name": "value", "value": "vecDot(sun_vec, norm)", "usedVars": ["norm", "sun_vec"], "jsValue": "vecDot(__debug__, sun_vec_, norm_)"}], "variable": "dot_sun_norm", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-cv43dbzh3s", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate the smaller angle between sun_vec (module to Sun) and normal of each baffle."}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-gbu4u030n5n", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "angle_sun_norm", "jsValue": "angle_sun_norm_"}, {"name": "value", "value": "vecAng(sun_vec, norm)", "usedVars": ["norm", "sun_vec"], "jsValue": "vecAng(__debug__, sun_vec_, norm_)"}], "variable": "angle_sun_norm", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-t2vk9falde", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate the angle between each vertical edge and Z-axis."}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-mesusnyuxx", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "angle_z_edg", "jsValue": "angle_z_edg_"}, {"name": "value", "value": "vecAng2(edg_vec, [0, 0, 1], bottom_edg_vec)", "usedVars": ["edg_vec", "bottom_edg_vec"], "jsValue": "vecAng2(__debug__, edg_vec_, [0, 0, 1], bottom_edg_vec_)"}], "variable": "angle_z_edg"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-oy6o2yv7o4a", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Make rotations according to angles: if baffle facing sun -- angles towards sun; if not, parallel to ground."}]}, {"type": 1, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-n104n96a4r", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "BAFFLE_BEHAVIOR == \"responsive\"", "jsValue": "BAFFLE_BEHAVIOR_ == \"responsive\"", "usedVars": ["BAFFLE_BEHAVIOR"]}], "children": [{"type": 13, "ID": "prod-k73ynb1o63j", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~24", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~24", "ID": "prod-qkda7vgnrga", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Baffles rotation (parallel to ground) for baffles not facing Sun."}], "selectGeom": false}, {"type": 1, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~24", "ID": "prod-11cm6ykflwl", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "dot_sun_norm > 0", "usedVars": ["dot_sun_norm"], "jsValue": "dot_sun_norm_ > 0"}], "children": [{"type": 13, "ID": "prod-11cm6ykflwl-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~24~children~2", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~24~children~2", "ID": "prod-hk611btl838", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Rotate"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "baffle", "usedVars": ["baffle"], "jsValue": "baffle_"}, {"name": "ray", "value": "bottom_edg_ray", "usedVars": ["bottom_edg_ray"], "jsValue": "bottom_edg_ray_"}, {"name": "angle", "value": "PI / 2 + angle_z_edg", "usedVars": ["angle_z_edg"], "jsValue": "JSON.parse(JSON.stringify(PI)) / 2 + angle_z_edg_"}], "selectGeom": false}]}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~24", "ID": "prod-7ive0fmb98j", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Baffles rotation for baffles facing Sun."}]}, {"type": 1, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~24", "ID": "prod-pbb9y7tg4hm", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "dot_sun_norm < 0", "usedVars": ["dot_sun_norm"], "jsValue": "dot_sun_norm_ < 0"}], "children": [{"type": 13, "ID": "prod-0q4km11tabi", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~24~children~4", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~24~children~4", "ID": "prod-zcpvwkfou8o", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Rotate"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "baffle", "usedVars": ["baffle"], "jsValue": "baffle_"}, {"name": "ray", "value": "bottom_edg_ray", "usedVars": ["bottom_edg_ray"], "jsValue": "bottom_edg_ray_"}, {"name": "angle", "value": "angle_sun_norm", "usedVars": ["angle_sun_norm"], "jsValue": "angle_sun_norm_"}], "selectGeom": false}], "selectGeom": false}], "selectGeom": false}, {"type": 1, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20", "ID": "prod-k6f671y6gsq", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "BAFFLE_BEHAVIOR == \"unresponsive\"", "jsValue": "BAFFLE_BEHAVIOR_ == \"unresponsive\"", "usedVars": ["BAFFLE_BEHAVIOR"]}], "children": [{"type": 13, "ID": "prod-6kuwowyubl", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~25", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~25", "ID": "prod-dx1w4bkb79p", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Baffles rotation (parallel to ground) for all baffles."}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~20~children~25", "ID": "prod-ihethxki5dg", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Rotate"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "baffle", "usedVars": ["baffle"], "jsValue": "baffle_"}, {"name": "ray", "value": "bottom_edg_ray", "usedVars": ["bottom_edg_ray"], "jsValue": "bottom_edg_ray_"}, {"name": "angle", "value": "PI / 2 + angle_z_edg", "usedVars": ["angle_z_edg"], "jsValue": "JSON.parse(JSON.stringify(PI)) / 2 + angle_z_edg_"}], "selectGeom": false}], "selectGeom": false}], "variable": "baffle", "selectGeom": false}, {"type": 14, "ID": "prod-ibj265bkhs", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up."}], "selectGeom": false}, {"type": 8, "ID": "prod-nj3xl8m7ag", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pg", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pg', null)"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}], "terminate": false, "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": {"name": "input", "type": 0, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output", "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode"}, "output": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source", "hasError": false, "hasExecuted": true, "model": 9}}, "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "selected": false}, {"source": {"name": "output", "type": 1, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2"], "meta": {"mode": 0}, "parentNode": {"name": "Sun", "id": "node_282zg96nrxb", "position": {"x": 5640, "y": 5220}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-hk3av8z9fwr", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create positions for Sun."}]}, {"type": 8, "ID": "prod-dpq078vgysq", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Arc"}, "argCount": 6, "args": [{"name": "var_name", "value": "sun_pos", "jsValue": "sun_pos_"}, {"name": "__model__"}, {"name": "origin", "value": "SUN_COORD", "usedVars": ["SUN_COORD"], "jsValue": "SUN_COORD_"}, {"name": "radius", "value": "50", "usedVars": [], "jsValue": "50"}, {"name": "num_positions", "value": "20", "usedVars": [], "jsValue": "20"}, {"name": "arc_angle", "value": "PI * 2", "usedVars": [], "jsValue": "JSON.parse(JSON.stringify(PI)) * 2"}], "variable": "sun_pos", "terminate": false, "selectGeom": false}, {"type": 8, "ID": "prod-he6mbextumi", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "ring1", "jsValue": "ring1_"}, {"name": "__model__"}, {"name": "entities", "value": "sun_pos", "usedVars": ["sun_pos"], "jsValue": "sun_pos_"}, {"name": "close", "value": "'close'", "jsValue": "'close'", "usedVars": []}], "variable": "ring1", "terminate": false, "selectGeom": false}, {"type": 14, "ID": "prod-4t8dv2sqwnk", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Duplicate rings."}], "selectGeom": false}, {"type": 8, "ID": "prod-szwimdk3kum", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "ring2", "jsValue": "ring2_"}, {"name": "__model__"}, {"name": "entities", "value": "ring1", "usedVars": ["ring1"], "jsValue": "ring1_"}, {"name": "vector", "value": "[0, 0, 10]", "usedVars": [], "jsValue": "[0, 0, 10]"}], "variable": "ring2", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-vy7umz98ils", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "ring3", "jsValue": "ring3_"}, {"name": "__model__"}, {"name": "entities", "value": "ring1", "usedVars": ["ring1"], "jsValue": "ring1_"}, {"name": "vector", "value": "[0, 0, 35]", "usedVars": [], "jsValue": "[0, 0, 35]"}], "variable": "ring3", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-hxbb6j6u66", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "ring4", "jsValue": "ring4_"}, {"name": "__model__"}, {"name": "entities", "value": "ring1", "usedVars": ["ring1"], "jsValue": "ring1_"}, {"name": "vector", "value": "[0, 0, 60]", "usedVars": [], "jsValue": "[0, 0, 60]"}], "variable": "ring4", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-xg3lj0pugfn", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "ring5", "jsValue": "ring5_"}, {"name": "__model__"}, {"name": "entities", "value": "ring1", "usedVars": ["ring1"], "jsValue": "ring1_"}, {"name": "vector", "value": "[0, 0, 70]", "usedVars": [], "jsValue": "[0, 0, 70]"}], "variable": "ring5", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-cvb7hw4ig7t", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Scale"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[ring1, ring5]", "usedVars": ["ring1", "ring5"], "jsValue": "[ring1_, ring5_]"}, {"name": "plane", "value": "ring1", "usedVars": ["ring1"], "jsValue": "ring1_"}, {"name": "scale", "value": "[0.05, 0.05, 1]", "usedVars": [], "jsValue": "[0.05, 0.05, 1]"}], "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-4j1npptg5ob", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Scale"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[ring2, ring4]", "usedVars": ["ring2", "ring4"], "jsValue": "[ring2_, ring4_]"}, {"name": "plane", "value": "ring1", "usedVars": ["ring1"], "jsValue": "ring1_"}, {"name": "scale", "value": "[0.7, 0.7, 1]", "usedVars": [], "jsValue": "[0.7, 0.7, 1]"}], "selectGeom": false, "terminate": false}, {"type": 14, "ID": "prod-v7kjqhyaig", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Warp rings into spherical shape."}]}, {"type": 8, "ID": "prod-3atu8iep2ty", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "strs", "jsValue": "strs_"}, {"name": "__model__"}, {"name": "entities", "value": "[ring1, ring2, ring3, ring4, ring5]", "usedVars": ["ring1", "ring2", "ring3", "ring4", "ring5"], "jsValue": "[ring1_, ring2_, ring3_, ring4_, ring5_]"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_stringers'", "jsValue": "'open_stringers'", "usedVars": []}], "variable": "strs", "terminate": false, "selectGeom": false}, {"type": 0, "ID": "prod-y0jrwmhvvcg", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "suncrvs", "jsValue": "suncrvs_"}, {"name": "value", "value": "[]", "usedVars": [], "jsValue": "[]"}], "variable": "suncrvs", "selectGeom": false, "terminate": false}, {"type": 4, "ID": "prod-knv04ecl8ob", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "str", "jsValue": "str_"}, {"name": "list", "value": "strs", "usedVars": ["strs"], "jsValue": "strs_"}], "children": [{"type": 13, "ID": "prod-4wuu2ic10ps", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~14", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "ID": "prod-sjwry0a8smb", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Nurbs"}, "argCount": 6, "args": [{"name": "var_name", "value": "nurbs_posis", "jsValue": "nurbs_posis_"}, {"name": "__model__"}, {"name": "coords", "usedVars": ["str"], "value": "str#ps @xyz", "jsValue": "__modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', str_), 'xyz')"}, {"name": "degree", "usedVars": [], "value": "2", "jsValue": "2"}, {"name": "close", "value": "'open'", "jsValue": "'open'", "usedVars": []}, {"name": "num_positions", "usedVars": [], "value": "20", "jsValue": "20"}], "variable": "nurbs_posis", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~14", "terminate": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~14", "ID": "prod-wf6qq0swba", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "nurbs_pline", "jsValue": "nurbs_pline_"}, {"name": "__model__"}, {"name": "entities", "value": "nurbs_posis", "usedVars": ["nurbs_posis"], "jsValue": "nurbs_posis_"}, {"name": "close", "value": "'open'", "jsValue": "'open'", "usedVars": []}], "variable": "nurbs_pline", "terminate": false, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~14", "ID": "prod-jh8jy6fjk2l", "enabled": true, "print": false, "meta": {"module": "list", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "list", "value": "suncrvs", "usedVars": ["suncrvs"], "jsValue": "suncrvs_"}, {"name": "item", "value": "nurbs_pline", "usedVars": ["nurbs_pline"], "jsValue": "nurbs_pline_"}, {"name": "method", "value": "'to_end'", "jsValue": "'to_end'", "usedVars": []}], "terminate": false, "selectGeom": false}], "variable": "str", "selectGeom": false}, {"type": 0, "ID": "prod-ehen1xrvjg", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "suncrvs@name", "jsValue": "suncrvs_@name", "usedVars": ["suncrvs"]}, {"name": "value", "value": "\"sun_curve\"", "usedVars": [], "jsValue": "\"sun_curve\""}], "variable": null, "selectGeom": false}, {"type": 8, "ID": "prod-57zn5jfr177", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[strs, ring1, ring2, ring3, ring4, ring5]", "usedVars": ["ring1", "ring2", "ring3", "ring4", "ring5", "strs"], "jsValue": "[strs_, ring1_, ring2_, ring3_, ring4_, ring5_]"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "terminate": false, "selectGeom": false}, {"type": 8, "ID": "prod-blj2q8vmrjj", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "sunrings", "jsValue": "sunrings_"}, {"name": "__model__"}, {"name": "entities", "value": "suncrvs", "usedVars": ["suncrvs"], "jsValue": "suncrvs_"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_stringers'", "jsValue": "'open_stringers'", "usedVars": []}], "variable": "sunrings", "terminate": false, "selectGeom": false}, {"type": 14, "ID": "prod-0no08c5fx73", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create attribute name \"sun_rings\" for sun rings polylines."}]}, {"type": 0, "ID": "prod-pgjvwhmks1p", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "sunrings@name", "jsValue": "sunrings_@name", "usedVars": ["sunrings"]}, {"name": "value", "value": "\"sun_ring\"", "usedVars": [], "jsValue": "\"sun_ring\""}], "variable": null, "terminate": false, "selectGeom": false}, {"type": 14, "ID": "prod-olsyeuinqij", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Make polygons for Sun."}]}, {"type": 0, "ID": "prod-qjh29tr34m", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "sun_pl", "jsValue": "sun_pl_"}, {"name": "value", "value": "#pl ?@name==\"sun_curve\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['name', null], '==', \"sun_curve\")"}], "variable": "sun_pl"}, {"type": 8, "ID": "prod-phuxv6mybll", "enabled": true, "print": false, "meta": {"module": "list", "name": "Add"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "list", "value": "sun_pl", "usedVars": ["sun_pl"], "jsValue": "sun_pl_"}, {"name": "item", "value": "#pl ?@name==\"sun_ring\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['name', null], '==', \"sun_ring\")"}, {"name": "method", "value": "'extend_end'", "jsValue": "'extend_end'", "usedVars": []}]}, {"type": 8, "ID": "prod-t8aqzkzpkdm", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "sun_pg", "jsValue": "sun_pg_"}, {"name": "__model__"}, {"name": "entities", "value": "sun_pl", "usedVars": ["sun_pl"], "jsValue": "sun_pl_"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_quads'", "jsValue": "'open_quads'", "usedVars": []}], "variable": "sun_pg"}, {"type": 14, "ID": "prod-7falqdy4to4", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add Colour to Sun."}]}, {"type": 8, "ID": "prod-lwtld7snpl", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Color"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "sun_pg", "usedVars": ["sun_pg"], "jsValue": "sun_pg_"}, {"name": "color", "value": "[1, 0.9, 0]", "usedVars": [], "jsValue": "[1, 0.9, 0]"}]}, {"type": 14, "ID": "prod-9sivrz3qys9", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up."}], "selectGeom": false}, {"type": 8, "ID": "prod-ojo20x7cr8b", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pg", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pg', null)"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}], "terminate": false, "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": {"name": "input", "type": 0, "edges": [{"source": "~flowchart~nodes~0~output", "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~input", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode"}, "output": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source", "hasError": false, "hasExecuted": true, "model": 10}}, "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "selected": false}, {"source": {"name": "output", "type": 1, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~3"], "meta": {"mode": 0}, "parentNode": {"name": "Glass Panels", "id": "node_o5z2wx0wx6h", "position": {"x": 5360, "y": 5120}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-o461y7kv1tq", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Get polygons for glass panels."}]}, {"type": 8, "ID": "prod-dlnpe7x890u", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#co ?@name==\"crvs\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'co', null), ['name', null], '==', \"crvs\")"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}], "terminate": false, "selectGeom": false}, {"type": 8, "ID": "prod-k1s5m2wwb2f", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "glass_panels", "jsValue": "glass_panels_"}, {"name": "__model__"}, {"name": "entities", "value": "#pl", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pl', null)"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_quads'", "jsValue": "'open_quads'", "usedVars": []}], "variable": "glass_panels"}, {"type": 14, "ID": "prod-abko9welv0s", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Set glass material properties."}]}, {"type": 8, "ID": "prod-6kwty2s5n7b", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Color"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "glass_panels", "usedVars": ["glass_panels"], "jsValue": "glass_panels_"}, {"name": "color", "value": "[0, 0.4, 0.6]", "usedVars": [], "jsValue": "[0, 0.4, 0.6]"}]}, {"type": 8, "ID": "prod-ngjy5aclecs", "enabled": true, "print": false, "meta": {"module": "material", "name": "Glass"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "name", "value": "\"glass\"", "usedVars": [], "jsValue": "\"glass\""}, {"name": "opacity", "value": "0.3", "usedVars": [], "jsValue": "0.3"}]}, {"type": 8, "ID": "prod-pxf96lxhlq", "enabled": true, "print": false, "meta": {"module": "material", "name": "Set"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "glass_panels", "usedVars": ["glass_panels"], "jsValue": "glass_panels_"}, {"name": "material", "value": "\"glass\"", "usedVars": [], "jsValue": "\"glass\""}]}, {"type": 14, "ID": "prod-uu8rpppbess", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add name attribute \"glass\" to glass panel polygons."}]}, {"type": 0, "ID": "prod-aef0e2lft8u", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "glass_panels@name", "jsValue": "glass_panels_@name", "usedVars": ["glass_panels"]}, {"name": "value", "value": "\"glass\"", "usedVars": [], "jsValue": "\"glass\""}], "variable": null}, {"type": 14, "ID": "prod-39wslwi59hk", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up."}]}, {"type": 8, "ID": "prod-apnk85xopy", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pg ?@name==\"glass\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['name', null], '==', \"glass\")"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}], "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": false}, "input": {"name": "input", "type": 0, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output", "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~3~source~parentNode~input", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~3~source~parentNode"}, "output": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~3~source", "hasError": false, "hasExecuted": true, "model": 5}}, "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "End", "id": "node_il0cz5acwup", "position": {"x": 5420, "y": 5480}, "enabled": true, "type": "end", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 11, "ID": "Return", "meta": {"name": "", "module": ""}, "argCount": 2, "args": [{"name": "__model__", "value": "", "jsValue": ""}, {"name": "value", "value": "", "jsValue": "", "usedVars": []}], "print": false, "enabled": true, "terminate": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 11}}, "selected": false}], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 8}}, "selected": false}], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 4}}, "selected": false}, "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~3~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input~edges~0"], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 3}}, "selected": false}, "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~input~edges~0"], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0"}, "hasError": false, "hasExecuted": true, "model": 2}, "~flowchart~nodes~0~output~edges~0~target~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~3~source~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"], "edges": ["~flowchart~nodes~0~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~3~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~3", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2"], "functions": [], "ordered": true, "last_updated": "2021-03-26T09:54:23.779Z"}, "version": "0.7.5", "settings": "{\"normals\":{\"show\":false,\"size\":5},\"axes\":{\"show\":true,\"size\":50},\"grid\":{\"show\":true,\"size\":500,\"pos\":{\"x\":0,\"y\":0,\"z\":0}},\"background\":{\"show\":false,\"background_set\":0},\"positions\":{\"show\":true,\"size\":0.5},\"tjs_summary\":{\"show\":false},\"gi_summary\":{\"show\":true},\"wireframe\":{\"show\":false},\"camera\":{\"pos\":{\"x\":1093.9882119443496,\"y\":-607.2730384974591,\"z\":272.285922129089},\"target\":{\"x\":0,\"y\":0,\"z\":0},\"ortho\":false},\"colors\":{\"viewer_bg\":\"#E6E6E6\",\"position\":\"#000000\",\"position_s\":\"#0033FF\",\"vertex_s\":\"#FFCC00\",\"face_f\":\"#FFFFFF\",\"face_f_s\":\"#4949BD\",\"face_b\":\"#DDDDDD\",\"face_b_s\":\"#00006D\"},\"ambient_light\":{\"show\":true,\"color\":\"#FFFFFF\",\"intensity\":0.5},\"hemisphere_light\":{\"show\":true,\"helper\":false,\"skyColor\":\"#FFFFFF\",\"groundColor\":\"#FFFFFF\",\"intensity\":0.5},\"directional_light\":{\"show\":false,\"helper\":false,\"color\":\"#FFFFFF\",\"intensity\":1,\"shadow\":true,\"azimuth\":90,\"altitude\":45,\"distance\":10,\"type\":\"directional\",\"shadowSize\":2048},\"ground\":{\"show\":false,\"width\":1000,\"length\":1000,\"height\":-0.5,\"color\":\"#FFFFFF\",\"shininess\":0},\"select\":{\"selector\":{\"id\":8,\"name\":\"Collections\"},\"tab\":\"0\",\"enabledselector\":{\"ps\":true,\"_v\":true,\"_e\":true,\"_w\":true,\"_f\":true,\"pt\":true,\"pl\":true,\"pg\":true,\"co\":true}},\"version\":\"0.7.5\",\"geo\":{\"imagery\":{\"layer\":\"Open Street Map\",\"terrain\":\"Ellipsoid\"},\"camera\":{\"pos\":{\"x\":0,\"y\":0,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0},\"direction\":{\"x\":0,\"y\":0,\"z\":0},\"up\":{\"x\":0,\"y\":0,\"z\":0},\"right\":{\"x\":0,\"y\":0,\"z\":0}},\"time\":{\"date\":\"2021-02-10T09:59\"},\"model\":{\"polygonEdge\":false},\"updated\":true}}"}