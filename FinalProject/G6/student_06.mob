{"name": "FinalProject_G6_student_06", "author": "new_user", "flowchart": {"id": "0c3d16f2-9cd6-ffe1-648e-a59240bd9df8", "name": "FinalProject_G6_student_06", "description": "This code is modelled after the Bund Finance Center, a building in The Bund, Shanghai, China. This building is notable for its three, overlapping, moving layers of curtain walls. These curtain walls are composed of vertical copper tubes, with varying lengths that are remapped to a cos function. Each copper tube has multiple segments joined together. The sizes of the copper tubes are also responsive the to sun direction, as the side facing the sun would have thicker tubes than the other sides in shade. The tubes could also expand outwards, with distances related to the tube length. \n\n<img src=\"http://www.iaacblog.com/wp-content/uploads/2019/11/1-6.jpg\" height=\"200\">  <img src=\"https://thumbs.gfycat.com/KeenComplexCub-size_restricted.gif\" height=\"200\">", "language": "js", "meta": {"selected_nodes": [0]}, "nodes": [{"name": "Start", "id": "node_l2o07qi56sn", "position": {"x": 5240, "y": 4720}, "enabled": true, "type": "start", "procedure": [{"type": 13, "ID": "", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 10, "ID": "prod-yeb7vpetjp", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "1a .Number of Tubes\n- This parameter defines the total amount of tubes of the curtainwalls. \n- Every increase in 1 unit would add 1 tube."}, "args": [{"name": "const_name", "value": "NUM_TUBE", "jsValue": "NUM_TUBE_"}, {"name": "__input__", "value": 100, "step": "1", "min": "20", "max": "200"}]}, {"type": 10, "ID": "prod-j2t1pg3atpd", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "1b. Standard Tube Size\n- This parameter defines the standard size of each tube of the curtain walls. \n- Every increase in 0.1 unit would increase the radius of the tube by 0.1 unit. \n- When this parameter is high, the actual value of the standard tube size input would be restricted to avoid intersection."}, "args": [{"name": "const_name", "value": "TUBE_SIZE", "jsValue": "TUBE_SIZE_"}, {"name": "__input__", "value": 0.5, "step": "0.01", "min": "0", "max": "0.5"}]}, {"type": 10, "ID": "prod-ykr8ffa5ms", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "1c. Number of Tube Segments\n- This parameter defines the number of segments of each tube. \n- Every increase in 1 unit would add 1 segment to each tube."}, "args": [{"name": "const_name", "value": "TUBE_SEGMENTS", "jsValue": "TUBE_SEGMENTS_"}, {"name": "__input__", "value": 3, "step": "1", "min": "2", "max": "5"}]}, {"type": 10, "ID": "prod-sjrp7kp5r3n", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "2. Sun Azimuth\n- This parameter defines the azimuth angel of the sun, which influence the actual size of the tubes of the curtain wall.\n- The tubes facing the sun would have larger radius to block the sunlight."}, "args": [{"name": "const_name", "value": "SUN_AZIMUTH", "jsValue": "SUN_AZIMUTH_"}, {"name": "__input__", "value": "90", "step": "1", "min": "0", "max": "360"}], "selectGeom": false}, {"type": 10, "ID": "prod-705ercszlj4", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "3a. Number of Undulations\n- This parameter defines the number of undulations of the length of the curtain wall.\n- Every increase in 1 unit would add 1 undulation."}, "args": [{"name": "const_name", "value": "NUM_UND", "jsValue": "NUM_UND_"}, {"name": "__input__", "value": 4, "step": "1", "min": "1", "max": "5"}]}, {"type": 10, "ID": "prod-b3vqc9owmei", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "3b. Depth of Undulations\n- This parameter defines the amplitude of the undulation of the length of the curtain walls.\n- Every increase in 0.1 unit would increase the undulation depth by 0.1 unit."}, "args": [{"name": "const_name", "value": "UND_DEPTH", "jsValue": "UND_DEPTH_"}, {"name": "__input__", "value": "8", "step": "0.1", "min": "0", "max": "15"}]}, {"type": 10, "ID": "prod-6fo9qvur68", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "4. Number of Curtain Wall Layer\n- This parameter defines the number of layer of the curtain walls. \n- Every increase in 1 unit would add one more layer of curtain wall outwards."}, "args": [{"name": "const_name", "value": "TUBE_LAYER", "jsValue": "TUBE_LAYER_"}, {"name": "__input__", "value": 3, "step": "1", "min": "1", "max": "3"}], "selectGeom": false}, {"type": 10, "ID": "prod-95802z61prq", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "5. Rotation Degree\n- This parameter defines the rotation degree of the curtain walls. \n- Every increase in 1 unit will rotate the 1st layer of curtain walls clockwise for 1 degree. \n- The 2nd layer rotates in the opposite diretion to the 1st layer; the 3rd layer rotates half of the degree of the 1st layer."}, "args": [{"name": "const_name", "value": "FACADE_ROTATION", "jsValue": "FACADE_ROTATION_"}, {"name": "__input__", "value": 90, "step": "1", "min": "0", "max": "360"}], "selectGeom": false}, {"type": 10, "ID": "prod-3h1xrkn386o", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "6. Expansion Ratio\n- This parameter defines the extent of expansion of the tubes on the curtain walls. \n- The higher the parameter, the further the tubes would expand outwards. \n- The shorter tubes would always expand a longer distance than the longer tubes. \n- When this parameter equals 0, all the tubes are vertically straight."}, "args": [{"name": "const_name", "value": "EXPANSION", "jsValue": "EXPANSION_"}, {"name": "__input__", "value": 1.5, "step": "0.1", "min": "0", "max": "3"}], "selectGeom": false}, {"type": 10, "ID": "prod-8452c5rjc35", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "7. Number of Layers of Stacked Structure\n- This parameter defines the number of layers of the stacked structure of the building body. \n- Every increase in 1 unit would add 1 layer to the stacked structure, at the same time decrease the size of the building block by 0.5 unit, and the floor area would increase accordingly."}, "args": [{"name": "const_name", "value": "NUM_STACK", "jsValue": "NUM_STACK_"}, {"name": "__input__", "value": 10, "step": "1", "min": "0", "max": "10"}]}, {"type": 10, "ID": "prod-632tw7gqydo", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 1, "description": "8. Volume Length\n- This parameter defines the length of the building volume in the Y direction. \n- Every increase in 1 unit would increase the length in the Y direction for 1 unit, at the same time the width in the  X direction would decrease so the floor area and the volume remain consistent. \n- The default length is 35 units."}, "args": [{"name": "const_name", "value": "VOLUME_LENGTH", "jsValue": "VOLUME_LENGTH_"}, {"name": "__input__", "value": 35, "step": "1", "min": "10", "max": "100"}]}, {"type": 10, "ID": "prod-pfyhcq1i7bb", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "Input", "name": "Constant", "inputMode": 2, "description": "9. Joints\n-This parameter defines the availability of the tube joints, to avoid the excessive amount of polygons."}, "args": [{"name": "const_name", "value": "SEGMENT_JOINTS", "jsValue": "SEGMENT_JOINTS_"}, {"name": "__input__", "value": false}], "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": false, "show_func": false}, "input": {"name": "input", "type": 0, "edges": [], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0"}, "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0"], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "Geolocation", "id": "node_luhfdzvza5n", "position": {"x": 5240, "y": 4860}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-qp63266de8e", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "set geolocation and north vector"}], "selectGeom": false}, {"type": 0, "ID": "prod-rtjs5zr98s", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "@geolocation", "jsValue": "@geolocation", "usedVars": []}, {"name": "value", "value": "{\"latitude\": 31.228978390307514,\"longitude\": 121.49344115174983}", "usedVars": [], "jsValue": "{\"latitude\": 31.228978390307514,\"longitude\": 121.49344115174983}"}], "variable": null, "selectGeom": false}, {"type": 0, "ID": "prod-m3pr3jzheh8", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "@north", "jsValue": "@north", "usedVars": []}, {"name": "value", "value": "[-50, 50]", "usedVars": [], "jsValue": "[-50, 50]"}], "variable": null, "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0"], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "Rail", "id": "node_97tzies77jl", "position": {"x": 5240, "y": 5020}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-3zr4tyhk7hv", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Ceate the linear boundary of the building"}]}, {"type": 8, "ID": "prod-rycco6ww2wm", "enabled": true, "print": false, "meta": {"module": "make", "name": "Position"}, "argCount": 3, "args": [{"name": "var_name", "value": "boundary_posi", "jsValue": "boundary_posi_"}, {"name": "__model__"}, {"name": "coords", "value": "[[14, -19, 20], [22, 8, 20], [14, 19, 20], [-14, 19, 20], [-14, -19, 20]]", "usedVars": [], "jsValue": "[[14, -19, 20], [22, 8, 20], [14, 19, 20], [-14, 19, 20], [-14, -19, 20]]"}], "variable": "boundary_posi", "selectGeom": false}, {"type": 14, "ID": "prod-mssuu727mia", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Fillet the courners of the boundary"}]}, {"type": 8, "ID": "prod-njvp9kqskhl", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "boundary_pl", "jsValue": "boundary_pl_"}, {"name": "__model__"}, {"name": "entities", "value": "boundary_posi", "usedVars": ["boundary_posi"], "jsValue": "boundary_posi_"}, {"name": "close", "value": "'close'", "jsValue": "'close'", "usedVars": []}], "variable": "boundary_pl", "selectGeom": false}, {"type": 14, "ID": "prod-ib00opywwnk", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Scale the outline without change the floor area"}], "selectGeom": false}, {"type": 8, "ID": "prod-0t8ngk7o7po", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Area"}, "argCount": 3, "args": [{"name": "var_name", "value": "area", "jsValue": "area_"}, {"name": "__model__"}, {"name": "entities", "value": "boundary_pl", "usedVars": ["boundary_pl"], "jsValue": "boundary_pl_"}], "variable": "area", "selectGeom": false}, {"type": 8, "ID": "prod-pxnms8ngva", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Scale"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "boundary_pl", "usedVars": ["boundary_pl"], "jsValue": "boundary_pl_"}, {"name": "plane", "value": "boundary_pl", "usedVars": ["boundary_pl"], "jsValue": "boundary_pl_"}, {"name": "scale", "value": "[area / VOLUME_LENGTH / 38, VOLUME_LENGTH / 38, 1]", "usedVars": ["VOLUME_LENGTH", "area"], "jsValue": "[area_ / VOLUME_LENGTH_ / 38, VOLUME_LENGTH_ / 38, 1]"}], "selectGeom": false}, {"type": 0, "ID": "prod-6vh5yyp4gro", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "boundary_pl@type", "jsValue": "boundary_pl_@type", "usedVars": ["boundary_pl"]}, {"name": "value", "value": "\"boundary\"", "usedVars": [], "jsValue": "\"boundary\""}], "variable": null}, {"type": 14, "ID": "prod-m27mmjqnlzf", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Get the positions of the facade layer"}], "selectGeom": false}, {"type": 8, "ID": "prod-bb1u1bs4t4o", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Divide"}, "argCount": 5, "args": [{"name": "var_name", "value": "division", "jsValue": "division_"}, {"name": "__model__"}, {"name": "entities", "value": "boundary_pl", "usedVars": ["boundary_pl"], "jsValue": "boundary_pl_"}, {"name": "divisor", "value": "5", "usedVars": [], "jsValue": "5"}, {"name": "method", "value": "'by_max_length'", "jsValue": "'by_max_length'", "usedVars": []}], "variable": "division", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-8kdkblwjm4f", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Nurbs"}, "argCount": 6, "args": [{"name": "var_name", "value": "origins", "jsValue": "origins_"}, {"name": "__model__"}, {"name": "coords", "value": "division#ps @xyz", "usedVars": ["division"], "jsValue": "__modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', division_), 'xyz')"}, {"name": "degree", "value": "5", "usedVars": [], "jsValue": "5"}, {"name": "close", "value": "'close'", "jsValue": "'close'", "usedVars": []}, {"name": "num_positions", "value": "NUM_TUBE * 3", "usedVars": ["NUM_TUBE"], "jsValue": "NUM_TUBE_ * 3"}], "variable": "origins", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-n6a4ngg84ua", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "outline", "jsValue": "outline_"}, {"name": "__model__"}, {"name": "entities", "value": "origins", "usedVars": ["origins"], "jsValue": "origins_"}, {"name": "close", "value": "'close'", "jsValue": "'close'", "usedVars": []}], "variable": "outline"}, {"type": 14, "ID": "prod-lri7e8fmgi", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add normals to each position on the layers"}], "selectGeom": false}, {"type": 18, "ID": "prod-wkh72c53len", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "localFunc", "name": "Add_Normals"}, "args": [{"name": "__none__"}, {"name": "pline", "value": "outline", "usedVars": ["outline"], "jsValue": "outline_"}], "terminate": false}, {"type": 4, "ID": "prod-u4cs76s125o", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "i", "jsValue": "i_"}, {"name": "list", "value": "range(0, NUM_TUBE * 3, 3)", "usedVars": ["NUM_TUBE"], "jsValue": "range(__debug__, 0, NUM_TUBE_ * 3, 3)"}], "children": [{"type": 13, "ID": "prod-u4cs76s125o-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-uri6ldyswx", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Assign attributes to positions of different layers"}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-r3zjdxhzjxq", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer1", "jsValue": "layer1_"}, {"name": "value", "value": "outline#ps[i]", "usedVars": ["outline", "i"], "jsValue": "__modules__.query.Get(__params__.model, 'ps', outline_)[pythonList(i_, __modules__.query.Get(__params__.model, 'ps', outline_).length)]"}], "variable": "layer1"}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-into4zuula9", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer1@type", "jsValue": "layer1_@type", "usedVars": ["layer1"]}, {"name": "value", "value": "\"layer1\"", "usedVars": [], "jsValue": "\"layer1\""}], "variable": null}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-35jynjgyiec", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer2", "jsValue": "layer2_"}, {"name": "value", "value": "outline#ps[i+1]", "usedVars": ["outline", "i"], "jsValue": "__modules__.query.Get(__params__.model, 'ps', outline_)[pythonList(i_ + 1, __modules__.query.Get(__params__.model, 'ps', outline_).length)]"}], "variable": "layer2", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-dg4glgk1lqu", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer2@type", "jsValue": "layer2_@type", "usedVars": ["layer2"]}, {"name": "value", "value": "\"layer2\"", "usedVars": [], "jsValue": "\"layer2\""}], "variable": null, "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-bolvsgbrlri", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer3", "jsValue": "layer3_"}, {"name": "value", "value": "outline#ps[i+2]", "usedVars": ["outline", "i"], "jsValue": "__modules__.query.Get(__params__.model, 'ps', outline_)[pythonList(i_ + 2, __modules__.query.Get(__params__.model, 'ps', outline_).length)]"}], "variable": "layer3", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-2uixsr4zq3j", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer3@type", "jsValue": "layer3_@type", "usedVars": ["layer3"]}, {"name": "value", "value": "\"layer3\"", "usedVars": [], "jsValue": "\"layer3\""}], "variable": null, "selectGeom": false}, {"type": 14, "ID": "prod-a4ok23o25pb", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Move the positions of different layers"}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15"}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-3ayd0j1gm33", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "layer2", "usedVars": ["layer2"], "jsValue": "layer2_"}, {"name": "vectors", "value": "vecSetLen(layer2@nor , 1)", "usedVars": ["layer2"], "jsValue": "vecSetLen(__debug__,  __modules__.attrib.Get(__params__.model, layer2_, 'nor'), 1)"}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-66s4v8cswi8", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "layer2", "usedVars": ["layer2"], "jsValue": "layer2_"}, {"name": "vectors", "value": "[0, 0, 1]", "usedVars": [], "jsValue": "[0, 0, 1]"}]}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-jk4hljtykxr", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "layer3", "usedVars": ["layer3"], "jsValue": "layer3_"}, {"name": "vectors", "value": "vecSetLen(layer3@nor , 2)", "usedVars": ["layer3"], "jsValue": "vecSetLen(__debug__,  __modules__.attrib.Get(__params__.model, layer3_, 'nor'), 2)"}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~15", "ID": "prod-0jbmio9h0d6u", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "layer3", "usedVars": ["layer3"], "jsValue": "layer3_"}, {"name": "vectors", "value": "[0, 0, 2]", "usedVars": [], "jsValue": "[0, 0, 2]"}], "selectGeom": false}], "variable": "i"}, {"type": 14, "ID": "prod-tq09b773y1", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean the geometry entities"}]}, {"type": 8, "ID": "prod-6wv7y5zshkb", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[#ps ?@type==\"layer1\" , #ps ?@type==\"layer2\" , #ps ?@type==\"layer3\" , #pl ?@type==\"boundary\" ]", "usedVars": [], "jsValue": "[ __modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'ps', null), ['type', null], '==', \"layer1\"),  __modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'ps', null), ['type', null], '==', \"layer2\"),  __modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'ps', null), ['type', null], '==', \"layer3\"),  __modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['type', null], '==', \"boundary\")]"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}]}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 16, "ID": "prod-pl0fvy6txf8", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "", "name": "", "otherInfo": {"prev_name": "Add_Normals", "num_returns": 0, "collapsed": false}}, "args": [{"name": "func_name", "value": "Add_Normals", "jsValue": "Add_Normals_"}, {"name": "arg_1", "value": "pline", "jsValue": "pline_", "usedVars": ["pline"]}], "children": [{"type": 13, "ID": "prod-uj9uht37ryg", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 4, "ID": "prod-p0j0vj73bx", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "edge", "jsValue": "edge_"}, {"name": "list", "value": "pline#_e", "usedVars": ["pline"], "jsValue": "__modules__.query.Get(__params__.model, '_e', pline_)"}], "children": [{"type": 13, "ID": "prod-1wvn7ch2nhs", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~1", "ID": "prod-hk8druyuarq", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate the vector of each edge"}]}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~1", "ID": "prod-5n6vensweco", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Vector"}, "argCount": 3, "args": [{"name": "var_name", "value": "vec", "jsValue": "vec_"}, {"name": "__model__"}, {"name": "entities", "value": "edge", "usedVars": ["edge"], "jsValue": "edge_"}], "variable": "vec", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~1", "ID": "prod-wzly2ne3qb", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate the normal vector"}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1~children~1", "ID": "prod-5543dxey3cn", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "edge@nor", "jsValue": "edge_@nor", "usedVars": ["edge"]}, {"name": "value", "usedVars": ["vec"], "value": "vecNorm([vec[1], -vec[0], 0])", "jsValue": "vecNorm(__debug__, [vec_[pythonList(1, vec_.length)], -vec_[pythonList(0, vec_.length)], 0])"}], "variable": null, "selectGeom": false}], "variable": "edge", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-xmilqp3xy3", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Push the normal attributes to each position, with averaged vector"}]}, {"type": 8, "ID": "prod-ttaib8uworn", "enabled": true, "print": false, "meta": {"module": "attrib", "name": "Push"}, "argCount": 6, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "pline#_e", "usedVars": ["pline"], "jsValue": "__modules__.query.Get(__params__.model, '_e', pline_)"}, {"name": "attrib", "value": "\"nor\"", "usedVars": [], "jsValue": "\"nor\""}, {"name": "ent_type_sel", "value": "'ps'", "jsValue": "'ps'", "usedVars": []}, {"name": "method_sel", "value": "'average'", "jsValue": "'average'", "usedVars": []}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-ra0mzvpnn1", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Visualize the normal vectors"}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-cvyru9pc8pj", "enabled": false, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "cens", "jsValue": "cens_"}, {"name": "value", "value": "pline#ps @xyz", "usedVars": ["pline"], "jsValue": "__modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', pline_), 'xyz')"}], "variable": "cens", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-x5u3cbo4q88", "enabled": false, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "vecs", "jsValue": "vecs_"}, {"name": "value", "value": "pline#ps @nor", "usedVars": ["pline"], "jsValue": "__modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', pline_), 'nor')"}], "variable": "vecs", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-a7eku9l4srk", "enabled": false, "print": false, "meta": {"module": "visualize", "name": "Ray"}, "argCount": 4, "args": [{"name": "var_name", "value": "vis", "jsValue": "vis_"}, {"name": "__model__"}, {"name": "rays", "value": "rayMake(cens, vecs)", "usedVars": ["cens", "vecs"], "jsValue": "rayMake(__debug__, cens_, vecs_)"}, {"name": "scale", "value": "0.2", "usedVars": [], "jsValue": "0.2"}], "variable": "vis", "selectGeom": false}], "variable": null, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "Skeleton", "id": "node_r21nt821ql", "position": {"x": 5420, "y": 5020}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-mbkr5y8ad6j", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Call the position lists of each layer"}]}, {"type": 0, "ID": "prod-r08szha6ju", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer1", "jsValue": "layer1_"}, {"name": "value", "value": "#ps ?@type==\"layer1\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'ps', null), ['type', null], '==', \"layer1\")"}], "variable": "layer1", "terminate": false}, {"type": 0, "ID": "prod-c3runrxfgbj", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer2", "jsValue": "layer2_"}, {"name": "value", "value": "#ps ?@type==\"layer2\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'ps', null), ['type', null], '==', \"layer2\")"}], "variable": "layer2", "selectGeom": false}, {"type": 0, "ID": "prod-kv9hk7jb99k", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer3", "jsValue": "layer3_"}, {"name": "value", "value": "#ps ?@type==\"layer3\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'ps', null), ['type', null], '==', \"layer3\")"}], "variable": "layer3", "selectGeom": false}, {"type": 14, "ID": "prod-s28v921zat", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create stringers for each layer of facade, with differetn rotation extend."}]}, {"type": 1, "ID": "prod-l7l2ith1mq", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "TUBE_LAYER >= 1", "usedVars": ["TUBE_LAYER"], "jsValue": "TUBE_LAYER_ >= 1"}], "children": [{"type": 13, "ID": "prod-l7l2ith1mq-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 4, "ID": "prod-k8ub3t6q8lr", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "i", "jsValue": "i_"}, {"name": "list", "value": "range(0, NUM_TUBE)", "usedVars": ["NUM_TUBE"], "jsValue": "range(__debug__, 0, NUM_TUBE_)"}], "children": [{"type": 13, "ID": "prod-d1zs8he9yl4", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~1", "ID": "prod-jjrv0pgzo4a", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Extrude each position"}], "selectGeom": false}, {"type": 18, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~1", "ID": "prod-3z198u9y5yc", "enabled": true, "print": false, "argCount": 4, "meta": {"module": "localFunc", "name": "Get_Length", "otherInfo": {"deletedArgs": []}}, "args": [{"name": "var_name", "value": "length", "jsValue": "length_"}, {"name": "index", "value": "i", "usedVars": ["i"], "jsValue": "i_"}, {"name": "num_posis", "value": "NUM_TUBE", "usedVars": ["NUM_TUBE"], "jsValue": "NUM_TUBE_"}, {"name": "rotation", "value": "FACADE_ROTATION", "jsValue": "FACADE_ROTATION_", "usedVars": ["FACADE_ROTATION"]}], "variable": "length", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~1", "ID": "prod-c1qif67a6ac", "enabled": true, "print": false, "meta": {"module": "make", "name": "Extrude"}, "argCount": 6, "args": [{"name": "var_name", "value": "stringer", "jsValue": "stringer_"}, {"name": "__model__"}, {"name": "entities", "value": "layer1[i]", "usedVars": ["i", "layer1"], "jsValue": "layer1_[pythonList(i_, layer1_.length)]"}, {"name": "dist", "value": "length - 18", "usedVars": [], "jsValue": "length_ - 18"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'stringers'", "jsValue": "'stringers'", "usedVars": []}], "variable": "stringer", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~1", "ID": "prod-h9jzzh14v2o", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "stringer@type", "jsValue": "stringer_@type", "usedVars": ["stringer"]}, {"name": "value", "value": "\"stringer\"", "usedVars": [], "jsValue": "\"stringer\""}], "variable": null, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~1", "ID": "prod-61jhes0ewrq", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Expand the stringers outwards"}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~1", "ID": "prod-cpy02y9c8o", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "stringer#ps[1]", "usedVars": ["stringer"], "jsValue": "__modules__.query.Get(__params__.model, 'ps', stringer_)[pythonList(1, __modules__.query.Get(__params__.model, 'ps', stringer_).length)]"}, {"name": "vectors", "value": "vecSetLen(stringer#ps[0] @nor , length * 0.5 * EXPANSION)", "usedVars": ["EXPANSION", "stringer"], "jsValue": "vecSetLen(__debug__,  __modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', stringer_)[pythonList(0, __modules__.query.Get(__params__.model, 'ps', stringer_).length)], 'nor'), length_ * 0.5 * EXPANSION_)"}], "selectGeom": false}], "variable": "i", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6"}]}, {"type": 1, "ID": "prod-b11ahqu82p6", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "TUBE_LAYER >= 2", "usedVars": ["TUBE_LAYER"], "jsValue": "TUBE_LAYER_ >= 2"}], "children": [{"type": 13, "ID": "prod-b11ahqu82p6-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 4, "ID": "prod-aiynujco5qq", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "i", "jsValue": "i_"}, {"name": "list", "value": "range(0, NUM_TUBE)", "usedVars": ["NUM_TUBE"], "jsValue": "range(__debug__, 0, NUM_TUBE_)"}], "children": [{"type": 13, "ID": "prod-bgvkvgn4y1f", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7~children~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7~children~1", "ID": "prod-wi77aoky5i", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Extrude each position, with a rotation direction opposite to layer1"}]}, {"type": 18, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7~children~1", "ID": "prod-5755zywcgdh", "enabled": true, "print": false, "argCount": 4, "meta": {"module": "localFunc", "name": "Get_Length", "otherInfo": {"deletedArgs": []}}, "args": [{"name": "var_name", "value": "length", "jsValue": "length_"}, {"name": "index", "value": "i", "usedVars": ["i"], "jsValue": "i_"}, {"name": "num_posis", "value": "NUM_TUBE", "usedVars": ["NUM_TUBE"], "jsValue": "NUM_TUBE_"}, {"name": "rotation", "value": "-FACADE_ROTATION", "jsValue": "-FACADE_ROTATION_", "usedVars": ["FACADE_ROTATION"]}], "variable": "length", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7~children~1", "ID": "prod-rnqoubp7nqf", "enabled": true, "print": false, "meta": {"module": "make", "name": "Extrude"}, "argCount": 6, "args": [{"name": "var_name", "value": "stringer", "jsValue": "stringer_"}, {"name": "__model__"}, {"name": "entities", "value": "layer2[i]", "usedVars": ["i", "layer2"], "jsValue": "layer2_[pythonList(i_, layer2_.length)]"}, {"name": "dist", "value": "length - 18", "usedVars": [], "jsValue": "length_ - 18"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'stringers'", "jsValue": "'stringers'", "usedVars": []}], "variable": "stringer", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7~children~1", "ID": "prod-xfeqo2m4s1", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "stringer@type", "jsValue": "stringer_@type", "usedVars": ["stringer"]}, {"name": "value", "value": "\"stringer\"", "usedVars": [], "jsValue": "\"stringer\""}], "variable": null, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7~children~1", "ID": "prod-lfpugzivmcg", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Expand the stringers outwards"}]}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7~children~1", "ID": "prod-6loitxq02st", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "stringer#ps[1]", "usedVars": ["stringer"], "jsValue": "__modules__.query.Get(__params__.model, 'ps', stringer_)[pythonList(1, __modules__.query.Get(__params__.model, 'ps', stringer_).length)]"}, {"name": "vectors", "value": "vecSetLen(stringer#ps[0] @nor , length * 0.5 * EXPANSION)", "usedVars": ["EXPANSION", "stringer"], "jsValue": "vecSetLen(__debug__,  __modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', stringer_)[pythonList(0, __modules__.query.Get(__params__.model, 'ps', stringer_).length)], 'nor'), length_ * 0.5 * EXPANSION_)"}], "selectGeom": false}], "variable": "i", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~7"}]}, {"type": 1, "ID": "prod-mwvnwl5t3q", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "TUBE_LAYER >= 3", "usedVars": ["TUBE_LAYER"], "jsValue": "TUBE_LAYER_ >= 3"}], "children": [{"type": 13, "ID": "prod-mwvnwl5t3q-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 4, "ID": "prod-l67wzdh4d69", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "i", "jsValue": "i_"}, {"name": "list", "value": "range(0, NUM_TUBE)", "usedVars": ["NUM_TUBE"], "jsValue": "range(__debug__, 0, NUM_TUBE_)"}], "children": [{"type": 13, "ID": "prod-28p4xuc14ta", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~1", "ID": "prod-nmd21h253iq", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Extrude each position, with rotation degree half of layer1"}], "selectGeom": false}, {"type": 18, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~1", "ID": "prod-uwunkv1f2n", "enabled": true, "print": false, "argCount": 4, "meta": {"module": "localFunc", "name": "Get_Length", "otherInfo": {"deletedArgs": []}}, "args": [{"name": "var_name", "value": "length", "jsValue": "length_"}, {"name": "index", "value": "i", "usedVars": ["i"], "jsValue": "i_"}, {"name": "num_posis", "value": "NUM_TUBE", "usedVars": ["NUM_TUBE"], "jsValue": "NUM_TUBE_"}, {"name": "rotation", "value": "FACADE_ROTATION / 2", "jsValue": "FACADE_ROTATION_ / 2", "usedVars": ["FACADE_ROTATION"]}], "variable": "length", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~1", "ID": "prod-931sz35ks1k", "enabled": true, "print": false, "meta": {"module": "make", "name": "Extrude"}, "argCount": 6, "args": [{"name": "var_name", "value": "stringer", "jsValue": "stringer_"}, {"name": "__model__"}, {"name": "entities", "value": "layer3[i]", "usedVars": ["i", "layer3"], "jsValue": "layer3_[pythonList(i_, layer3_.length)]"}, {"name": "dist", "value": "length - 18", "usedVars": [], "jsValue": "length_ - 18"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'stringers'", "jsValue": "'stringers'", "usedVars": []}], "variable": "stringer", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~1", "ID": "prod-dpqlphut606", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "stringer@type", "jsValue": "stringer_@type", "usedVars": ["stringer"]}, {"name": "value", "value": "\"stringer\"", "usedVars": [], "jsValue": "\"stringer\""}], "variable": null, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~1", "ID": "prod-of98y5uz8u", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Expand the stringers outwards"}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~1", "ID": "prod-ww3565po1lo", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "stringer#ps[1]", "usedVars": ["stringer"], "jsValue": "__modules__.query.Get(__params__.model, 'ps', stringer_)[pythonList(1, __modules__.query.Get(__params__.model, 'ps', stringer_).length)]"}, {"name": "vectors", "value": "vecSetLen(stringer#ps[0] @nor , length * 0.5 * EXPANSION)", "usedVars": ["EXPANSION", "stringer"], "jsValue": "vecSetLen(__debug__,  __modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', stringer_)[pythonList(0, __modules__.query.Get(__params__.model, 'ps', stringer_).length)], 'nor'), length_ * 0.5 * EXPANSION_)"}], "selectGeom": false, "terminate": false}], "variable": "i", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8"}]}, {"type": 14, "ID": "prod-dgtca6b2mu", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up the geometry entities"}]}, {"type": 8, "ID": "prod-ioku7w7b98l", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pl ?@type==\"boundary\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['type', null], '==', \"boundary\")"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}]}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 16, "ID": "prod-m25f9wjgbgc", "enabled": true, "print": false, "argCount": 3, "meta": {"module": "", "name": "", "otherInfo": {"prev_name": "Law_Crv1", "num_returns": 1, "collapsed": true, "deletedArgs": []}}, "args": [{"name": "func_name", "value": "Law_Crv1", "jsValue": "Law_Crv1_"}, {"name": "arg_1", "value": "t", "jsValue": "t_", "usedVars": ["t"]}, {"name": "arg_2", "value": "rotation", "jsValue": "rotation_", "usedVars": ["rotation"]}], "children": [{"type": 13, "ID": "prod-it9bc00761e", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-qbgl7b9tys", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Convert the rotation degree to radian"}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-g74o3zx2sj5", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "radian", "jsValue": "radian_"}, {"name": "value", "value": "rotation / 360 * 2 * PI", "usedVars": ["rotation"], "jsValue": "rotation_ / 360 * 2 * JSON.parse(JSON.stringify(PI))"}], "variable": "radian", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-w0abvqsnqfr", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Set the rotation to be the phase difference of cos function "}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-zpfdycvernq", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "rt", "jsValue": "rt_"}, {"name": "value", "value": "cos(t + radian)", "usedVars": ["radian", "t"], "jsValue": "cos(__debug__, t_ + radian_)"}], "variable": "rt", "selectGeom": false}, {"type": 17, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-ca9ffq38iod", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "Value", "value": "rt", "usedVars": ["rt"], "jsValue": "rt_"}], "selectGeom": false}], "variable": null, "selectGeom": false}, {"type": 16, "ID": "prod-d720tjd7q2", "enabled": true, "print": false, "argCount": 4, "meta": {"module": "", "name": "", "otherInfo": {"prev_name": "Get_Length", "num_returns": 1, "collapsed": false, "deletedArgs": []}}, "args": [{"name": "func_name", "value": "Get_Length", "jsValue": "Get_Length_"}, {"name": "arg_1", "value": "index", "jsValue": "index_", "usedVars": ["index"]}, {"name": "arg_2", "value": "num_posis", "jsValue": "num_posis_", "usedVars": ["num_posis"]}, {"name": "arg_3", "value": "rotation", "jsValue": "rotation_", "usedVars": ["rotation"]}], "children": [{"type": 13, "ID": "prod-p12xcwgbb0k", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-w6a25y8m0yp", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Domain and range of the Law Curve"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-waytohpecf", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "do_t", "jsValue": "do_t_"}, {"name": "value", "value": "[PI, PI + (NUM_UND * PI * 2)]", "usedVars": ["NUM_UND"], "jsValue": "[JSON.parse(JSON.stringify(PI)), JSON.parse(JSON.stringify(PI)) + (NUM_UND_ * JSON.parse(JSON.stringify(PI)) * 2)]"}], "variable": "do_t", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-34q7zvdfc57", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "ra_rt", "jsValue": "ra_rt_"}, {"name": "value", "value": "[-1, 1]", "usedVars": [], "jsValue": "[-1, 1]"}], "variable": "ra_rt", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-4lo04htuewx", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Domain and range of the variables"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-7do1c3g2843", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "do_index", "jsValue": "do_index_"}, {"name": "value", "value": "[0, num_posis]", "usedVars": ["num_posis"], "jsValue": "[0, num_posis_]"}], "variable": "do_index", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-ryvxk54fnae", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "ra_length", "jsValue": "ra_length_"}, {"name": "value", "value": "[1, UND_DEPTH]", "usedVars": ["UND_DEPTH"], "jsValue": "[1, UND_DEPTH_]"}], "variable": "ra_length", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-ox9m0hgjws8", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Remap from arcs to t"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-xw0s1nfgrgf", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "t", "jsValue": "t_"}, {"name": "value", "value": "remap(index, do_index, do_t)", "usedVars": ["do_t", "do_index", "index"], "jsValue": "remap(__debug__, index_, do_index_, do_t_)"}], "variable": "t", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-ginp9q83uy", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Apply Law Curve"}], "selectGeom": false}, {"type": 18, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-sokveumlzdp", "enabled": true, "print": false, "argCount": 3, "meta": {"module": "localFunc", "name": "Law_Crv1", "otherInfo": {"deletedArgs": []}}, "args": [{"name": "var_name", "value": "rt", "jsValue": "rt_"}, {"name": "t", "value": "t", "usedVars": ["t"], "jsValue": "t_"}, {"name": "rotation", "value": "rotation", "jsValue": "rotation_", "usedVars": ["rotation"]}], "variable": "rt", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-t6h7lo3y6qa", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Remap from rt to rad"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-94003mjnrz4", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "length", "jsValue": "length_"}, {"name": "value", "value": "remap(rt, ra_rt, ra_length)", "usedVars": ["ra_rt", "ra_length", "rt"], "jsValue": "remap(__debug__, rt_, ra_rt_, ra_length_)"}], "variable": "length", "selectGeom": false}, {"type": 17, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-1kd4hr4a9zn", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "Value", "value": "length", "usedVars": [], "jsValue": "length_"}], "selectGeom": false}], "variable": null, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", {"source": {"name": "output", "type": 1, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1"], "meta": {"mode": 0}, "parentNode": {"name": "Sun", "id": "node_gbyamwde3iv", "position": {"x": 5600, "y": 5020}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-e9cuttm59si", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate the spherical polygon of the sun"}]}, {"type": 4, "ID": "prod-v9bz3k0qamk", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "i", "jsValue": "i_"}, {"name": "list", "value": "range(-PI / 2, 0.01 + PI / 2, PI / 20)", "usedVars": [], "jsValue": "range(__debug__, -JSON.parse(JSON.stringify(PI)) / 2, 0.01 + JSON.parse(JSON.stringify(PI)) / 2, JSON.parse(JSON.stringify(PI)) / 20)"}], "children": [{"type": 13, "ID": "prod-p6k35ptmyw", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~2", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~2", "ID": "prod-19jtuuvobmn", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Arc"}, "argCount": 6, "args": [{"name": "var_name", "value": "circle_posi", "jsValue": "circle_posi_"}, {"name": "__model__"}, {"name": "origin", "value": "[0, 0, 5 * sin(i)]", "usedVars": ["i"], "jsValue": "[0, 0, 5 * sin(__debug__, i_)]"}, {"name": "radius", "value": "5 * cos(i)", "usedVars": ["i"], "jsValue": "5 * cos(__debug__, i_)"}, {"name": "num_positions", "value": "20", "usedVars": [], "jsValue": "20"}, {"name": "arc_angle", "value": "2 * PI", "usedVars": [], "jsValue": "2 * JSON.parse(JSON.stringify(PI))"}], "variable": "circle_posi", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~2", "ID": "prod-082zczbjex65", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "circle_pl", "jsValue": "circle_pl_"}, {"name": "__model__"}, {"name": "entities", "value": "circle_posi", "usedVars": ["circle_posi"], "jsValue": "circle_posi_"}, {"name": "close", "value": "'close'", "jsValue": "'close'", "usedVars": []}], "variable": "circle_pl", "selectGeom": false}], "variable": "i", "selectGeom": false}, {"type": 8, "ID": "prod-rwb10dvb5ad", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "sun", "jsValue": "sun_"}, {"name": "__model__"}, {"name": "entities", "value": "#pl", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pl', null)"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_quads'", "jsValue": "'open_quads'", "usedVars": []}], "variable": "sun", "terminate": false}, {"type": 0, "ID": "prod-a3thi251rt6", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "sun@type", "jsValue": "sun_@type", "usedVars": ["sun"]}, {"name": "value", "value": "\"sun\"", "usedVars": [], "jsValue": "\"sun\""}], "variable": null}, {"type": 14, "ID": "prod-cqoa97vbxp", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Move and rotate the sun according to SUN_AZIMUTH"}]}, {"type": 8, "ID": "prod-h43jctrax76", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "sun", "usedVars": ["sun"], "jsValue": "sun_"}, {"name": "vectors", "value": "[0, 60, 50]", "usedVars": [], "jsValue": "[0, 60, 50]"}], "terminate": false}, {"type": 8, "ID": "prod-od3him02jcc", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Rotate"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "sun", "usedVars": ["sun"], "jsValue": "sun_"}, {"name": "ray", "value": "XY", "usedVars": [], "jsValue": "JSON.parse(JSON.stringify(XY))"}, {"name": "angle", "value": "SUN_AZIMUTH / 360 * 2 * PI", "usedVars": ["SUN_AZIMUTH"], "jsValue": "SUN_AZIMUTH_ / 360 * 2 * JSON.parse(JSON.stringify(PI))"}], "selectGeom": false}, {"type": 8, "ID": "prod-u2x2a4qs8hh", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pg", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pg', null)"}, {"name": "method", "value": "'keep_selected'", "jsValue": "'keep_selected'", "usedVars": []}]}, {"type": 14, "ID": "prod-vwcjy7worhb", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean the geometry entities"}], "selectGeom": false}, {"type": 8, "ID": "prod-djnrojl9y6i", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pl", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pl', null)"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "terminate": false, "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": {"name": "input", "type": 0, "edges": [{"source": "~flowchart~nodes~0~output", "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode"}, "output": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source", "hasError": false, "hasExecuted": true, "model": 7}}, "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "Curtain Wall", "id": "node_k1e6xq50h6i", "position": {"x": 5420, "y": 5180}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-43t6w44uvzq", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add limits to the TUBE_SIZE to avoid geometric intersection"}]}, {"type": 0, "ID": "prod-kukylf1v5sf", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "radius", "jsValue": "radius_"}, {"name": "value", "value": "[]", "usedVars": [], "jsValue": "[]"}], "variable": "radius"}, {"type": 8, "ID": "prod-lf0extme0wp", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "outline", "jsValue": "outline_"}, {"name": "__model__"}, {"name": "entities", "value": "#ps ?@type==\"layer1\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'ps', null), ['type', null], '==', \"layer1\")"}, {"name": "close", "value": "'close'", "jsValue": "'close'", "usedVars": []}], "variable": "outline"}, {"type": 8, "ID": "prod-ywlwy8xg1lq", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Length"}, "argCount": 3, "args": [{"name": "var_name", "value": "length", "jsValue": "length_"}, {"name": "__model__"}, {"name": "entities", "value": "outline", "usedVars": ["outline"], "jsValue": "outline_"}], "variable": "length"}, {"type": 14, "ID": "prod-364wbkh9sn7", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "When there is no expansion or only one layer, prevent the tubes intersection within each layer"}]}, {"type": 1, "ID": "prod-v4qq16tee1l", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "EXPANSION == 0 || TUBE_LAYER == 1", "usedVars": ["EXPANSION", "TUBE_LAYER"], "jsValue": "EXPANSION_ == 0 || TUBE_LAYER_ == 1"}], "children": [{"type": 13, "ID": "prod-v4qq16tee1l-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 1, "ID": "prod-abwblsogyza", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "NUM_TUBE * TUBE_SIZE * 2 > length", "usedVars": ["TUBE_SIZE", "NUM_TUBE"], "jsValue": "NUM_TUBE_ * TUBE_SIZE_ * 2 > length_"}], "children": [{"type": 13, "ID": "prod-7440afc0lct", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~1", "ID": "prod-k0xsiliu9rr", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "radius", "jsValue": "radius_"}, {"name": "value", "value": "length / NUM_TUBE / 2", "usedVars": ["NUM_TUBE"], "jsValue": "length_ / NUM_TUBE_ / 2"}], "variable": "radius", "selectGeom": false}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6"}, {"type": 3, "ID": "prod-dgndy7h52yl", "enabled": true, "print": false, "argCount": 0, "args": [], "children": [{"type": 13, "ID": "prod-bvqqk47tkk", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~2", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6~children~2", "ID": "prod-kyjxgig262", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "radius", "jsValue": "radius_"}, {"name": "value", "value": "TUBE_SIZE", "usedVars": ["TUBE_SIZE"], "jsValue": "TUBE_SIZE_"}], "variable": "radius", "selectGeom": false}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~6"}]}, {"type": 14, "ID": "prod-9cfow36sur9", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "When there is expansion and multiple layers, prevent the tubes intersection across differents layers"}]}, {"type": 3, "ID": "prod-bx7e3snkf2", "enabled": true, "print": false, "argCount": 0, "args": [], "children": [{"type": 13, "ID": "prod-bx7e3snkf2-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 1, "ID": "prod-o0d1srya2nj", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "NUM_TUBE * TUBE_SIZE * 6 > length", "usedVars": ["TUBE_SIZE", "NUM_TUBE"], "jsValue": "NUM_TUBE_ * TUBE_SIZE_ * 6 > length_"}], "children": [{"type": 13, "ID": "prod-qd9639ntke", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~1", "ID": "prod-qxebnq5zkum", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "radius", "jsValue": "radius_"}, {"name": "value", "value": "length / NUM_TUBE / 6", "usedVars": ["NUM_TUBE"], "jsValue": "length_ / NUM_TUBE_ / 6"}], "variable": "radius", "selectGeom": false}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8"}, {"type": 3, "ID": "prod-abvia3y5rea", "enabled": true, "print": false, "argCount": 0, "args": [], "children": [{"type": 13, "ID": "prod-ekj6ew6pvyu", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~2", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8~children~2", "ID": "prod-okmhk47rcta", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "radius", "jsValue": "radius_"}, {"name": "value", "value": "TUBE_SIZE", "usedVars": ["TUBE_SIZE"], "jsValue": "TUBE_SIZE_"}], "variable": "radius", "selectGeom": false}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~8"}]}, {"type": 14, "ID": "prod-vbtp6iixbu7", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add the radius of tubes to model attribute for head up disaplay"}]}, {"type": 0, "ID": "prod-il6h7rut38f", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "@tube_size", "jsValue": "@tube_size", "usedVars": []}, {"name": "value", "value": "radius", "usedVars": ["radius"], "jsValue": "radius_"}], "variable": null, "selectGeom": false}, {"type": 8, "ID": "prod-karlnz623sr", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "outline", "usedVars": ["outline"], "jsValue": "outline_"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}]}, {"type": 14, "ID": "prod-mit6wie843h", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Locate the sun"}]}, {"type": 8, "ID": "prod-1uj532giqs3i", "enabled": true, "print": false, "meta": {"module": "make", "name": "Position"}, "argCount": 3, "args": [{"name": "var_name", "value": "sun_posi", "jsValue": "sun_posi_"}, {"name": "__model__"}, {"name": "coords", "value": "[0, 30, 18]", "usedVars": [], "jsValue": "[0, 30, 18]"}], "variable": "sun_posi"}, {"type": 8, "ID": "prod-yb0w2ps2fb", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Rotate"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "sun_posi", "usedVars": ["sun_posi"], "jsValue": "sun_posi_"}, {"name": "ray", "value": "XY", "usedVars": [], "jsValue": "JSON.parse(JSON.stringify(XY))"}, {"name": "angle", "value": "SUN_AZIMUTH / 360 * 2 * PI", "usedVars": ["SUN_AZIMUTH"], "jsValue": "SUN_AZIMUTH_ / 360 * 2 * JSON.parse(JSON.stringify(PI))"}]}, {"type": 14, "ID": "prod-4yk0vmxgyxf", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Get the center lines of different length for each tube"}], "selectGeom": false}, {"type": 4, "ID": "prod-84ljen83f8", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "pl", "jsValue": "pl_"}, {"name": "list", "value": "#pl", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pl', null)"}], "children": [{"type": 13, "ID": "prod-84ljen83f8-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-qr2boh0e9m", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Calculate the distance between the sun and the origin of each tube"}]}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-owhco9vlhf9", "enabled": true, "print": false, "meta": {"module": "make", "name": "Position"}, "argCount": 3, "args": [{"name": "var_name", "value": "origin", "jsValue": "origin_"}, {"name": "__model__"}, {"name": "coords", "value": "pl#ps[0] @xyz", "usedVars": ["pl"], "jsValue": "__modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', pl_)[pythonList(0, __modules__.query.Get(__params__.model, 'ps', pl_).length)], 'xyz')"}], "variable": "origin"}, {"type": 8, "ID": "prod-3zydjvxy57w", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Distance"}, "argCount": 5, "args": [{"name": "var_name", "value": "sun_distance", "jsValue": "sun_distance_"}, {"name": "__model__"}, {"name": "entities1", "value": "sun_posi", "usedVars": ["sun_posi"], "jsValue": "sun_posi_"}, {"name": "entities2", "usedVars": ["origin"], "value": "origin", "jsValue": "origin_"}, {"name": "method", "value": "'ps_to_ps_distance'", "jsValue": "'ps_to_ps_distance'", "usedVars": []}], "variable": "sun_distance", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-i4qet0m89ns", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Get the offset accodring to the sun azimuth"}], "selectGeom": false}, {"type": 18, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-4bp0verul7d", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "localFunc", "name": "Get_Offset", "otherInfo": {"deletedArgs": [{"name": "num_posis", "usedVars": [], "linked": false}]}}, "args": [{"name": "var_name", "value": "offset", "jsValue": "offset_"}, {"name": "index", "value": "sun_distance", "usedVars": ["sun_distance"], "jsValue": "sun_distance_"}], "variable": "offset", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-6piwbb4y7kp", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate the section for sweeping, scaled by offset ratio"}]}, {"type": 8, "ID": "prod-pumz9cs3qy", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Arc"}, "argCount": 6, "args": [{"name": "var_name", "value": "sec_posi", "jsValue": "sec_posi_"}, {"name": "__model__"}, {"name": "origin", "value": "XY", "usedVars": [], "jsValue": "JSON.parse(JSON.stringify(XY))"}, {"name": "radius", "value": "radius * offset", "usedVars": ["offset", "radius"], "jsValue": "radius_ * offset_"}, {"name": "num_positions", "value": "7", "usedVars": [], "jsValue": "7"}, {"name": "arc_angle", "value": "2 * PI", "usedVars": [], "jsValue": "2 * JSON.parse(JSON.stringify(PI))"}], "variable": "sec_posi", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16"}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-05qerymb0qq3", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polyline"}, "argCount": 4, "args": [{"name": "var_name", "value": "sec_pl", "jsValue": "sec_pl_"}, {"name": "__model__"}, {"name": "entities", "value": "sec_posi", "usedVars": ["sec_posi"], "jsValue": "sec_posi_"}, {"name": "close", "value": "'open'", "jsValue": "'open'", "usedVars": []}], "variable": "sec_pl"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-qru5lu8qqs", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate the tube polygons"}], "selectGeom": false}, {"type": 8, "ID": "prod-orq5kuxcfr", "enabled": true, "print": false, "meta": {"module": "make", "name": "Sweep"}, "argCount": 6, "args": [{"name": "var_name", "value": "tube", "jsValue": "tube_"}, {"name": "__model__"}, {"name": "entities", "usedVars": ["pl"], "value": "pl", "jsValue": "pl_"}, {"name": "x_section", "usedVars": ["sec_pl"], "value": "sec_pl", "jsValue": "sec_pl_"}, {"name": "divisions", "usedVars": [], "value": "2", "jsValue": "2"}, {"name": "method", "value": "'quads'", "jsValue": "'quads'", "usedVars": []}], "variable": "tube", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-7pxu7bk9i84", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate the segments polylines"}], "selectGeom": false}, {"type": 8, "ID": "prod-ixagga4ytq", "enabled": true, "print": false, "meta": {"module": "make", "name": "Sweep"}, "argCount": 6, "args": [{"name": "var_name", "value": "segments", "jsValue": "segments_"}, {"name": "__model__"}, {"name": "entities", "usedVars": ["pl"], "value": "pl", "jsValue": "pl_"}, {"name": "x_section", "usedVars": ["sec_pl"], "value": "sec_pl", "jsValue": "sec_pl_"}, {"name": "divisions", "usedVars": ["TUBE_SEGMENTS"], "value": "TUBE_SEGMENTS", "jsValue": "TUBE_SEGMENTS_"}, {"name": "method", "value": "'ribs'", "jsValue": "'ribs'", "usedVars": []}], "variable": "segments", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-065oib5lukiw", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Assign attributes to the tubes and the segments"}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-hir5tmp658e", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "tube@type", "jsValue": "tube_@type", "usedVars": ["tube"]}, {"name": "value", "value": "\"curtain\"", "usedVars": [], "jsValue": "\"curtain\""}], "variable": null}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16", "ID": "prod-gsa3zs1x32g", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "segments@type", "jsValue": "segments_@type", "usedVars": ["segments"]}, {"name": "value", "value": "\"joint\"", "usedVars": [], "jsValue": "\"joint\""}], "variable": null}, {"type": 14, "ID": "prod-rjl15rkxpbp", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean the geometry entities"}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16"}, {"type": 8, "ID": "prod-hacbgjulx5w", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "sec_pl", "usedVars": ["sec_pl"], "jsValue": "sec_pl_"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "terminate": false, "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~procedure~16"}], "variable": "pl"}, {"type": 14, "ID": "prod-id9pevp7pyf", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean the geometry entities"}], "selectGeom": false}, {"type": 8, "ID": "prod-bstl8aisjis", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pl ?@type==\"stringer\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['type', null], '==', \"stringer\")"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "terminate": false, "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 16, "ID": "prod-80uirveng7d", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "", "name": "", "otherInfo": {"prev_name": "Law_Crv2", "num_returns": 1, "collapsed": false, "deletedArgs": [{"name": "arg_2", "value": "rotation", "jsValue": "rotation_", "usedVars": ["rotation"], "invalidVar": false, "linked": false}]}}, "args": [{"name": "func_name", "value": "Law_Crv2", "jsValue": "Law_Crv2_"}, {"name": "arg_1", "value": "t", "jsValue": "t_", "usedVars": ["t"]}], "children": [{"type": 13, "ID": "prod-0zontdo3k8on", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-0x2hzana10r", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "rt", "jsValue": "rt_"}, {"name": "value", "value": "1 / (t * t + 1)", "usedVars": ["t"], "jsValue": "1 / (t_ * t_ + 1)"}], "variable": "rt", "selectGeom": false}, {"type": 17, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~1", "ID": "prod-yopi3ky14km", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "Value", "value": "rt", "usedVars": ["rt"], "jsValue": "rt_"}], "selectGeom": false}], "variable": null, "selectGeom": false}, {"type": 16, "ID": "prod-t8i4bbea48b", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "", "name": "", "otherInfo": {"prev_name": "Get_Offset", "num_returns": 1, "collapsed": false, "deletedArgs": [{"name": "arg_3", "value": "rotation", "jsValue": "rotation_", "usedVars": ["rotation"], "invalidVar": false, "linked": false}, {"name": "arg_2", "value": "num_posis", "jsValue": "num_posis_", "usedVars": ["num_posis"], "invalidVar": false, "linked": false}]}}, "args": [{"name": "func_name", "value": "Get_Offset", "jsValue": "Get_Offset_"}, {"name": "arg_1", "value": "index", "jsValue": "index_", "usedVars": ["index"]}], "children": [{"type": 13, "ID": "prod-3nzswnlv4sd", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-4tcplgfiss3", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Domain and range of the Law Curve"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-pdjx9ykc7lo", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "do_t", "jsValue": "do_t_"}, {"name": "value", "value": "[0, 3]", "usedVars": [], "jsValue": "[0, 3]"}], "variable": "do_t", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-zwn4z37fbl", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "ra_rt", "jsValue": "ra_rt_"}, {"name": "value", "value": "[0, 1]", "usedVars": [], "jsValue": "[0, 1]"}], "variable": "ra_rt", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-fhu08a4xmfm", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Domain and range of the viriable"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-eolh9c1zn9l", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "do_index", "jsValue": "do_index_"}, {"name": "value", "value": "[10, 60]", "usedVars": [], "jsValue": "[10, 60]"}], "variable": "do_index", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-1n0qvsmakte", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "ra_offset", "jsValue": "ra_offset_"}, {"name": "value", "value": "[0.5, 1]", "usedVars": [], "jsValue": "[0.5, 1]"}], "variable": "ra_offset", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-e8glon3zr3p", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Remap from arcs to t"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-594awf5p40b", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "t", "jsValue": "t_"}, {"name": "value", "value": "remap(index, do_index, do_t)", "usedVars": ["do_t", "do_index", "index"], "jsValue": "remap(__debug__, index_, do_index_, do_t_)"}], "variable": "t", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-i0vzuksqas", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Apply Law Curve"}], "selectGeom": false}, {"type": 18, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-m80jng3wtv", "enabled": true, "print": false, "argCount": 2, "meta": {"module": "localFunc", "name": "Law_Crv2", "otherInfo": {"deletedArgs": [{"name": "rotation", "value": "rotation", "jsValue": "rotation_", "usedVars": ["rotation"], "invalidVar": false, "linked": false}]}}, "args": [{"name": "var_name", "value": "rt", "jsValue": "rt_"}, {"name": "t", "value": "t", "usedVars": ["t"], "jsValue": "t_"}], "variable": "rt", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-ym78zm04urp", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Remap from rt to rad"}], "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-s1ktv75hqud", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "offset", "jsValue": "offset_"}, {"name": "value", "value": "remap(rt, ra_rt, ra_offset)", "usedVars": ["ra_rt", "ra_offset", "rt"], "jsValue": "remap(__debug__, rt_, ra_rt_, ra_offset_)"}], "variable": "offset", "selectGeom": false}, {"type": 17, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~localFunc~2", "ID": "prod-8bmssgpuvhh", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "Value", "value": "offset", "usedVars": ["offset"], "jsValue": "offset_"}], "selectGeom": false}], "variable": null, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", {"source": {"name": "output", "type": 1, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1"], "meta": {"mode": 0}, "parentNode": {"name": "Joints", "id": "node_2h1axijfrrg", "position": {"x": 5420, "y": 5340}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-xpyii71sqoc", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Get the geometry entities"}], "selectGeom": false}, {"type": 0, "ID": "prod-3bkgfs9c9a", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "joints", "jsValue": "joints_"}, {"name": "value", "value": "#pl ?@type==\"joint\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['type', null], '==', \"joint\")"}], "variable": "joints", "selectGeom": false, "terminate": false}, {"type": 14, "ID": "prod-0juz8xfkrkpb", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add condition to generating the joints"}]}, {"type": 1, "ID": "prod-krtyukdxw2s", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "SEGMENT_JOINTS == true", "usedVars": ["SEGMENT_JOINTS"], "jsValue": "SEGMENT_JOINTS_ == true"}], "children": [{"type": 13, "ID": "prod-krtyukdxw2s-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-vwccy3tsl3a", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Remove the last end joint on each tube"}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4"}, {"type": 4, "ID": "prod-rxmi29jgwa", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "i", "jsValue": "i_"}, {"name": "list", "value": "range(TUBE_SEGMENTS, NUM_TUBE * (TUBE_SEGMENTS + 1) * TUBE_LAYER, TUBE_SEGMENTS + 1)", "usedVars": ["TUBE_LAYER", "TUBE_SEGMENTS", "NUM_TUBE"], "jsValue": "range(__debug__, TUBE_SEGMENTS_, NUM_TUBE_ * (TUBE_SEGMENTS_ + 1) * TUBE_LAYER_, TUBE_SEGMENTS_ + 1)"}], "children": [{"type": 13, "ID": "prod-8z0we4gw0n4", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4~children~2", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4~children~2", "ID": "prod-gpg4vz33tgb", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "joints[i]", "usedVars": ["i", "joints"], "jsValue": "joints_[pythonList(i_, joints_.length)]"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "selectGeom": false}], "variable": "i", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4"}, {"type": 0, "ID": "prod-ujgt7ctrmqj", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "joints", "jsValue": "joints_"}, {"name": "value", "value": "#pl", "usedVars": [], "jsValue": "__modules__.query.Get(__params__.model, 'pl', null)"}], "variable": "joints", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4", "ID": "prod-8ii5f5tw6ti", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate the joints polygons"}]}, {"type": 4, "ID": "prod-lppgx15hzqr", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "pl", "jsValue": "pl_"}, {"name": "list", "value": "joints", "usedVars": ["joints"], "jsValue": "joints_"}], "children": [{"type": 13, "ID": "prod-8aj44n8mjgt", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4~children~5", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4~children~5", "ID": "prod-ndoq5s88bja", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "joint_pl", "jsValue": "joint_pl_"}, {"name": "__model__"}, {"name": "entities", "value": "pl", "usedVars": ["pl"], "jsValue": "pl_"}, {"name": "vector", "value": "[0, 0, 0.1]", "usedVars": [], "jsValue": "[0, 0, 0.1]"}], "variable": "joint_pl", "selectGeom": false}, {"type": 8, "ID": "prod-kyoljs7o3ye", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "joint_end1", "jsValue": "joint_end1_"}, {"name": "__model__"}, {"name": "entities", "value": "joint_pl", "usedVars": ["joint_pl"], "jsValue": "joint_pl_"}, {"name": "vector", "value": "[0, 0, 0.1]", "usedVars": [], "jsValue": "[0, 0, 0.1]"}], "variable": "joint_end1", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4~children~5"}, {"type": 8, "ID": "prod-jtvafj8jtii", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "joint_end2", "jsValue": "joint_end2_"}, {"name": "__model__"}, {"name": "entities", "value": "joint_pl", "usedVars": ["joint_pl"], "jsValue": "joint_pl_"}, {"name": "vector", "value": "[0, 0, -0.1]", "usedVars": [], "jsValue": "[0, 0, -0.1]"}], "variable": "joint_end2", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4~children~5"}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4~children~5", "ID": "prod-g4qsknj3od8", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Scale"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "joint_pl", "usedVars": ["joint_pl"], "jsValue": "joint_pl_"}, {"name": "plane", "value": "joint_pl", "usedVars": ["joint_pl"], "jsValue": "joint_pl_"}, {"name": "scale", "value": "1.2", "usedVars": [], "jsValue": "1.2"}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4~children~5", "ID": "prod-z0t7ywi1qq", "enabled": true, "print": false, "meta": {"module": "make", "name": "Loft"}, "argCount": 5, "args": [{"name": "var_name", "value": "joint", "jsValue": "joint_"}, {"name": "__model__"}, {"name": "entities", "value": "[joint_end2, joint_pl, joint_end1]", "usedVars": ["joint_pl", "joint_end1", "joint_end2"], "jsValue": "[joint_end2_, joint_pl_, joint_end1_]"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'open_quads'", "jsValue": "'open_quads'", "usedVars": []}], "variable": "joint", "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4~children~5", "ID": "prod-8n2jfyqm344", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "joint@type", "jsValue": "joint_@type", "usedVars": ["joint"]}, {"name": "value", "value": "\"joint\"", "usedVars": [], "jsValue": "\"joint\""}], "variable": null, "selectGeom": false}], "variable": "pl", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~procedure~4"}]}, {"type": 14, "ID": "prod-cvhjxoj7ie", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean up the geometry entities"}], "selectGeom": false}, {"type": 8, "ID": "prod-67qu1u8eoaa", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[#pg , #pl ?@type==\"stringer\" ]", "usedVars": [], "jsValue": "[ __modules__.query.Get(__params__.model, 'pg', null),  __modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['type', null], '==', \"stringer\")]"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": {"name": "input", "type": 0, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output", "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode"}, "output": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source", "hasError": false, "hasExecuted": true, "model": 9}}, "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "selected": false}, {"source": {"name": "output", "type": 1, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2"], "meta": {"mode": 0}, "parentNode": {"name": "Body", "id": "node_qysd9yyvvkb", "position": {"x": 5240, "y": 5180}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-6wpvcv4i1po", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Get the base polygon"}], "selectGeom": false}, {"type": 8, "ID": "prod-9jiihletag8", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "base_pl", "jsValue": "base_pl_"}, {"name": "__model__"}, {"name": "entities", "value": "#pl ?@type==\"boundary\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pl', null), ['type', null], '==', \"boundary\")"}, {"name": "vector", "value": "null", "usedVars": [], "jsValue": "null"}], "variable": "base_pl", "selectGeom": false}, {"type": 8, "ID": "prod-j15wbcoxeu", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Divide"}, "argCount": 5, "args": [{"name": "var_name", "value": "division", "jsValue": "division_"}, {"name": "__model__"}, {"name": "entities", "value": "base_pl", "usedVars": ["base_pl"], "jsValue": "base_pl_"}, {"name": "divisor", "value": "5", "usedVars": [], "jsValue": "5"}, {"name": "method", "value": "'by_max_length'", "jsValue": "'by_max_length'", "usedVars": []}], "variable": "division", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-hcvcjhiamw6", "enabled": true, "print": false, "meta": {"module": "pattern", "name": "Nurbs"}, "argCount": 6, "args": [{"name": "var_name", "value": "base_posi", "jsValue": "base_posi_"}, {"name": "__model__"}, {"name": "coords", "value": "division#ps @xyz", "usedVars": ["division"], "jsValue": "__modules__.attrib.Get(__params__.model,  __modules__.query.Get(__params__.model, 'ps', division_), 'xyz')"}, {"name": "degree", "value": "4", "usedVars": [], "jsValue": "4"}, {"name": "close", "value": "'close'", "jsValue": "'close'", "usedVars": []}, {"name": "num_positions", "value": "70", "usedVars": [], "jsValue": "70"}], "variable": "base_posi", "selectGeom": false, "terminate": false}, {"type": 8, "ID": "prod-unzyrygjohq", "enabled": true, "print": false, "meta": {"module": "make", "name": "Polygon"}, "argCount": 3, "args": [{"name": "var_name", "value": "base_pg", "jsValue": "base_pg_"}, {"name": "__model__"}, {"name": "entities", "value": "base_posi", "usedVars": ["base_posi"], "jsValue": "base_posi_"}], "variable": "base_pg", "selectGeom": false}, {"type": 14, "ID": "prod-dm4lgkm2huu", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate the ceiling polygons according to the number of layers"}]}, {"type": 4, "ID": "prod-nivj5i2o7h", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "i", "jsValue": "i_"}, {"name": "list", "value": "range(0, TUBE_LAYER + 1)", "usedVars": ["TUBE_LAYER"], "jsValue": "range(__debug__, 0, TUBE_LAYER_ + 1)"}], "children": [{"type": 13, "ID": "prod-nivj5i2o7h-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7", "ID": "prod-0urhos85m7d", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Copy the source polygon, and offset each one 0.5 unit"}]}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7", "ID": "prod-arjo3qujmuj", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "ceiling_pg", "jsValue": "ceiling_pg_"}, {"name": "__model__"}, {"name": "entities", "value": "base_pg", "usedVars": ["base_pg"], "jsValue": "base_pg_"}, {"name": "vector", "value": "[0, 0, i]", "usedVars": ["i"], "jsValue": "[0, 0, i_]"}], "variable": "ceiling_pg"}, {"type": 8, "ID": "prod-2vpuyk6twoq", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Offset"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "ceiling_pg", "usedVars": ["ceiling_pg"], "jsValue": "ceiling_pg_"}, {"name": "dist", "value": "i + 0.5", "usedVars": ["i"], "jsValue": "i_ + 0.5"}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7", "ID": "prod-kjblig3on1h", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Extruede each layer of ceiling to the height of 1 unit "}]}, {"type": 8, "ID": "prod-tw7w97s2os", "enabled": true, "print": false, "meta": {"module": "make", "name": "Extrude"}, "argCount": 6, "args": [{"name": "var_name", "value": "ceiling_volume", "jsValue": "ceiling_volume_"}, {"name": "__model__"}, {"name": "entities", "value": "ceiling_pg", "usedVars": ["ceiling_pg"], "jsValue": "ceiling_pg_"}, {"name": "dist", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'quads'", "jsValue": "'quads'", "usedVars": []}], "variable": "ceiling_volume", "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7", "ID": "prod-p5e6vcfz7ti", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Copy, move and reverse the source polygon to the top of the volume"}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7", "ID": "prod-lugbnqrjjn9", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "ceiling_pg2", "jsValue": "ceiling_pg2_"}, {"name": "__model__"}, {"name": "entities", "value": "ceiling_pg", "usedVars": ["ceiling_pg"], "jsValue": "ceiling_pg_"}, {"name": "vector", "value": "[0, 0, 1]", "usedVars": [], "jsValue": "[0, 0, 1]"}], "variable": "ceiling_pg2", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7", "ID": "prod-7sclan7oh2m", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Reverse"}, "argCount": 3, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "ceiling_pg", "usedVars": ["ceiling_pg"], "jsValue": "ceiling_pg_"}], "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7", "ID": "prod-0ta2871343i9", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Assign attributes to the polygons"}], "selectGeom": false}, {"type": 0, "ID": "prod-gxxryn1u66s", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "ceiling_volume@type", "jsValue": "ceiling_volume_@type", "usedVars": ["ceiling_volume"]}, {"name": "value", "value": "\"ceiling\"", "usedVars": [], "jsValue": "\"ceiling\""}], "variable": null, "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7"}, {"type": 0, "ID": "prod-lsq1x02a2g", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "ceiling_pg@type", "jsValue": "ceiling_pg_@type", "usedVars": ["ceiling_pg"]}, {"name": "value", "value": "\"ceiling\"", "usedVars": [], "jsValue": "\"ceiling\""}], "variable": null, "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7"}, {"type": 0, "ID": "prod-ar2nh1v32ug", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "ceiling_pg2@type", "jsValue": "ceiling_pg2_@type", "usedVars": ["ceiling_pg2"]}, {"name": "value", "value": "\"ceiling\"", "usedVars": [], "jsValue": "\"ceiling\""}], "variable": null, "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7", "ID": "prod-gtzv5hlir5b", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Hide the edge of the ceiling volume, keep the top and bottom layer polygon visibile"}], "selectGeom": false}, {"type": 8, "ID": "prod-ee43ed67vvg", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Edge"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "ceiling_volume", "usedVars": ["ceiling_volume"], "jsValue": "ceiling_volume_"}, {"name": "method", "value": "'hidden'", "jsValue": "'hidden'", "usedVars": []}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~7"}], "variable": "i"}, {"type": 14, "ID": "prod-tgj6sgq6t3i", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate the building body"}]}, {"type": 4, "ID": "prod-f2ivzstndtb", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "item", "value": "i", "jsValue": "i_"}, {"name": "list", "value": "range(1, NUM_STACK)", "usedVars": ["NUM_STACK"], "jsValue": "range(__debug__, 1, NUM_STACK_)"}], "children": [{"type": 13, "ID": "prod-f2ivzstndtb-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9", "ID": "prod-jkw8o2zng8p", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate the stacked structure with varying scale ratio and extrusion height"}]}, {"type": 1, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9", "ID": "prod-spcbtmjru59", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "condition", "value": "i < NUM_STACK - 1", "usedVars": ["NUM_STACK", "i"], "jsValue": "i_ < NUM_STACK_ - 1"}], "children": [{"type": 13, "ID": "prod-spcbtmjru59-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~2", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 18, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~2", "ID": "prod-oij8nbi57x", "enabled": true, "print": false, "argCount": 3, "meta": {"module": "localFunc", "name": "Generate_Layer"}, "args": [{"name": "__none__"}, {"name": "index", "value": "i", "usedVars": ["i"], "jsValue": "i_"}, {"name": "polygon", "value": "base_pg", "usedVars": ["base_pg"], "jsValue": "base_pg_"}]}]}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9", "ID": "prod-uy02j8808lf", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Generate the building body"}]}, {"type": 3, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9", "ID": "prod-aiblwss5wpg", "enabled": true, "print": false, "argCount": 0, "args": [], "children": [{"type": 13, "ID": "prod-aiblwss5wpg-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "ID": "prod-38iqby1pq7t", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Copy the source polygon, and scale it to the same ratios as the last stacked layer"}]}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "ID": "prod-k1qny8r7ey", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "block_pg", "jsValue": "block_pg_"}, {"name": "__model__"}, {"name": "entities", "value": "base_pg", "usedVars": ["base_pg"], "jsValue": "base_pg_"}, {"name": "vector", "value": "null", "usedVars": [], "jsValue": "null"}], "variable": "block_pg", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "ID": "prod-2c5dpzrxkh5", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Scale"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "block_pg", "usedVars": ["block_pg"], "jsValue": "block_pg_"}, {"name": "plane", "value": "block_pg", "usedVars": ["block_pg"], "jsValue": "block_pg_"}, {"name": "scale", "value": "1 - 0.03 * i", "usedVars": ["i"], "jsValue": "1 - 0.03 * i_"}], "selectGeom": false}, {"type": 14, "ID": "prod-gy3xmj77mww", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add the floor area to model attribute for head up disaplay"}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4"}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "ID": "prod-f9m6c2mysp9", "enabled": true, "print": false, "meta": {"module": "calc", "name": "Area"}, "argCount": 3, "args": [{"name": "var_name", "value": "floor_area", "jsValue": "floor_area_"}, {"name": "__model__"}, {"name": "entities", "value": "block_pg", "usedVars": ["block_pg"], "jsValue": "block_pg_"}], "variable": "floor_area"}, {"type": 0, "ID": "prod-sn17v7mjlo", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "@floor_area", "jsValue": "@floor_area", "usedVars": []}, {"name": "value", "value": "floor_area", "usedVars": ["floor_area"], "jsValue": "floor_area_"}], "variable": null, "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4"}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "ID": "prod-xrc0uw3ezrl", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Extrude the block to the height of 20 units"}]}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "ID": "prod-fl9ar6q5swb", "enabled": true, "print": false, "meta": {"module": "make", "name": "Extrude"}, "argCount": 6, "args": [{"name": "var_name", "value": "block", "jsValue": "block_"}, {"name": "__model__"}, {"name": "entities", "value": "block_pg", "usedVars": ["block_pg"], "jsValue": "block_pg_"}, {"name": "dist", "value": "20", "usedVars": [], "jsValue": "20"}, {"name": "divisions", "value": "8", "usedVars": [], "jsValue": "8"}, {"name": "method", "value": "'quads'", "jsValue": "'quads'", "usedVars": []}], "variable": "block", "selectGeom": false, "terminate": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "ID": "prod-jk8wi3h19na", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Assign attributes"}]}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "ID": "prod-vci7urzo9qe", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "block@type", "jsValue": "block_@type", "usedVars": ["block"]}, {"name": "value", "value": "\"block\"", "usedVars": [], "jsValue": "\"block\""}], "variable": null}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~procedure~9~children~4", "ID": "prod-35ojthvxajo", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "block", "usedVars": ["block"], "jsValue": "block_"}, {"name": "vectors", "value": "[0, 0, -20]", "usedVars": [], "jsValue": "[0, 0, -20]"}]}]}], "variable": "i"}, {"type": 14, "ID": "prod-vkec23na73", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Duplicate the stacked structure"}]}, {"type": 8, "ID": "prod-7izq99gl6qh", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "layer2", "jsValue": "layer2_"}, {"name": "__model__"}, {"name": "entities", "value": "#pg ?@type==\"stack\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['type', null], '==', \"stack\")"}, {"name": "vector", "value": "[0, 0, -11]", "usedVars": [], "jsValue": "[0, 0, -11]"}], "variable": "layer2"}, {"type": 14, "ID": "prod-rj3iksrv7um", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Clean the geometry entities"}]}, {"type": 8, "ID": "prod-fkpadfjfn48", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Delete"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[#pl , base_pg]", "usedVars": ["base_pg"], "jsValue": "[ __modules__.query.Get(__params__.model, 'pl', null), base_pg_]"}, {"name": "method", "value": "'delete_selected'", "jsValue": "'delete_selected'", "usedVars": []}], "terminate": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 16, "ID": "prod-g93jezrksrb", "enabled": true, "print": false, "argCount": 3, "meta": {"module": "", "name": "", "otherInfo": {"prev_name": "Generate_Layer", "num_returns": 0, "collapsed": true}}, "args": [{"name": "func_name", "value": "Generate_Layer", "jsValue": "Generate_Layer_"}, {"name": "arg_1", "value": "index", "jsValue": "index_", "usedVars": ["index"]}, {"name": "arg_2", "value": "polygon", "jsValue": "polygon_", "usedVars": ["polygon"]}], "children": [{"type": 13, "ID": "prod-g93jezrksrb-blank", "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-fgszuqgpruk", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Copy and scale the source polygon"}]}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-pead192l3s", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "layer_pg", "jsValue": "layer_pg_"}, {"name": "__model__"}, {"name": "entities", "value": "polygon", "usedVars": ["polygon"], "jsValue": "polygon_"}, {"name": "vector", "value": "null", "usedVars": [], "jsValue": "null"}], "variable": "layer_pg", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-gi6491ztv0w", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Scale"}, "argCount": 5, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "layer_pg", "usedVars": ["layer_pg"], "jsValue": "layer_pg_"}, {"name": "plane", "value": "layer_pg", "usedVars": ["layer_pg"], "jsValue": "layer_pg_"}, {"name": "scale", "value": "1 - 0.03 * index", "usedVars": ["index"], "jsValue": "1 - 0.03 * index_"}], "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-9llsflces3q", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Extrude the source polygon to volume"}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-d7caxxjj81", "enabled": true, "print": false, "meta": {"module": "make", "name": "Extrude"}, "argCount": 6, "args": [{"name": "var_name", "value": "layer_volume", "jsValue": "layer_volume_"}, {"name": "__model__"}, {"name": "entities", "value": "layer_pg", "usedVars": ["layer_pg"], "jsValue": "layer_pg_"}, {"name": "dist", "value": "1 - 0.1 * index", "usedVars": ["index"], "jsValue": "1 - 0.1 * index_"}, {"name": "divisions", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "method", "value": "'quads'", "jsValue": "'quads'", "usedVars": []}], "variable": "layer_volume", "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-m7cg60x4jy", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Move the volume"}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-skrwd840oo", "enabled": true, "print": false, "meta": {"module": "modify", "name": "Move"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "layer_volume", "usedVars": ["layer_volume"], "jsValue": "layer_volume_"}, {"name": "vectors", "value": "[0, 0, -1 * index + 0.05 * index * index]", "usedVars": ["index"], "jsValue": "[0, 0, -1 * index_ + 0.05 * index_ * index_]"}], "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-ga2zfdjyc3r", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Copy, move and reverse the source polygon to the top of the volume"}], "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-b9l9f2iwwfo", "enabled": true, "print": false, "meta": {"module": "make", "name": "Copy"}, "argCount": 4, "args": [{"name": "var_name", "value": "layer_pg2", "jsValue": "layer_pg2_"}, {"name": "__model__"}, {"name": "entities", "value": "layer_pg", "usedVars": ["layer_pg"], "jsValue": "layer_pg_"}, {"name": "vector", "value": "[0, 0, 1 - 0.1 * index]", "usedVars": ["index"], "jsValue": "[0, 0, 1 - 0.1 * index_]"}], "variable": "layer_pg2", "selectGeom": false}, {"type": 8, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-4iwf9gdvxbt", "enabled": true, "print": false, "meta": {"module": "edit", "name": "Reverse"}, "argCount": 3, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "layer_pg", "usedVars": ["layer_pg"], "jsValue": "layer_pg_"}], "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-q3v7p5k8z6", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Assign attributes to the polygons"}]}, {"type": 0, "ID": "prod-jvgytm7o8b", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer_volume@type", "jsValue": "layer_volume_@type", "usedVars": ["layer_volume"]}, {"name": "value", "value": "\"stack\"", "usedVars": [], "jsValue": "\"stack\""}], "variable": null, "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1"}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-hjhuu81i6nd", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer_pg@type", "jsValue": "layer_pg_@type", "usedVars": ["layer_pg"]}, {"name": "value", "value": "\"stack\"", "usedVars": [], "jsValue": "\"stack\""}], "variable": null, "selectGeom": false}, {"type": 0, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-050ewwafw1j2", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "layer_pg2@type", "jsValue": "layer_pg2_@type", "usedVars": ["layer_pg2"]}, {"name": "value", "value": "\"stack\"", "usedVars": [], "jsValue": "\"stack\""}], "variable": null, "selectGeom": false}, {"type": 14, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1", "ID": "prod-gudubfm6w4", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Hide the edge of the later volume, keep the top and bottom layer polygon visibile"}]}, {"type": 8, "ID": "prod-p5p51o63n0c", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Edge"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "layer_volume", "usedVars": ["layer_volume"], "jsValue": "layer_volume_"}, {"name": "method", "value": "'hidden'", "jsValue": "'hidden'", "usedVars": []}], "selectGeom": false, "parent": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~localFunc~1"}], "variable": null}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": {"name": "input", "type": 0, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output", "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~input", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode"}, "output": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source", "hasError": false, "hasExecuted": true, "model": 6}}, "target": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "selected": false}], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "Materials", "id": "node_4gipjbaj4vv", "position": {"x": 5240, "y": 5340}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-oe9akrcj3gj", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Create the material \"copper\""}]}, {"type": 8, "ID": "prod-66gscrxbu2h", "enabled": true, "print": false, "meta": {"module": "material", "name": "MeshMat"}, "argCount": 7, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "name", "value": "\"copper\"", "usedVars": [], "jsValue": "\"copper\""}, {"name": "color", "value": "[0, 0, 0]", "usedVars": [], "jsValue": "[0, 0, 0]"}, {"name": "opacity", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "select_side", "value": "'both'", "jsValue": "'both'", "usedVars": []}, {"name": "select_vert_colors", "value": "'none'", "jsValue": "'none'", "usedVars": []}], "selectGeom": false}, {"type": 8, "ID": "prod-p88btv9pj8", "enabled": true, "print": false, "meta": {"module": "material", "name": "Physical"}, "argCount": 7, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "name", "value": "\"copper\"", "usedVars": [], "jsValue": "\"copper\""}, {"name": "emissive", "value": "[0.7, 0.61, 0.5]", "usedVars": [], "jsValue": "[0.7, 0.61, 0.5]"}, {"name": "roughness", "value": "0.5", "usedVars": [], "jsValue": "0.5"}, {"name": "metalness", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "reflectivity", "value": "1", "usedVars": [], "jsValue": "1"}], "selectGeom": false}, {"type": 14, "ID": "prod-5w3a4f4xq5x", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Set material to the building body"}]}, {"type": 8, "ID": "prod-u77af5m6kb8", "enabled": true, "print": false, "meta": {"module": "material", "name": "Set"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "[#pg ?@type==\"stack\" , #pg ?@type==\"ceiling\" ]", "usedVars": [], "jsValue": "[ __modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['type', null], '==', \"stack\"),  __modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['type', null], '==', \"ceiling\")]"}, {"name": "material", "value": "\"copper\"", "usedVars": [], "jsValue": "\"copper\""}]}, {"type": 8, "ID": "prod-g1u9j9bj4r", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Color"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pg ?@type==\"block\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['type', null], '==', \"block\")"}, {"name": "color", "value": "[0.6, 0.6, 0.6]", "usedVars": [], "jsValue": "[0.6, 0.6, 0.6]"}], "selectGeom": false}, {"type": 8, "ID": "prod-4v41q89epae", "enabled": true, "print": false, "meta": {"module": "material", "name": "Glass"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "name", "value": "\"glass\"", "usedVars": [], "jsValue": "\"glass\""}, {"name": "opacity", "value": "0.8", "usedVars": [], "jsValue": "0.8"}]}, {"type": 8, "ID": "prod-5b12iivtda", "enabled": true, "print": false, "meta": {"module": "material", "name": "Set"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "#pg ?@type==\"block\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['type', null], '==', \"block\")"}, {"name": "material", "value": "\"glass\"", "usedVars": [], "jsValue": "\"glass\""}]}, {"type": 14, "ID": "prod-7rhvf0jm4o3", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Set material to the curtain walls"}]}, {"type": 0, "ID": "prod-uzoi96as2", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "curtain", "jsValue": "curtain_"}, {"name": "value", "value": "#pg ?@type==\"curtain\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['type', null], '==', \"curtain\")"}], "variable": "curtain"}, {"type": 8, "ID": "prod-sih2vznbkj", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Mesh"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "curtain", "usedVars": ["curtain"], "jsValue": "curtain_"}, {"name": "method", "value": "'smooth'", "jsValue": "'smooth'", "usedVars": []}], "selectGeom": false}, {"type": 8, "ID": "prod-8wvf17wth36", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Edge"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "curtain", "usedVars": ["curtain"], "jsValue": "curtain_"}, {"name": "method", "value": "'hidden'", "jsValue": "'hidden'", "usedVars": []}], "selectGeom": false}, {"type": 8, "ID": "prod-p2lodbwppd", "enabled": true, "print": false, "meta": {"module": "material", "name": "Set"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "curtain", "usedVars": ["curtain"], "jsValue": "curtain_"}, {"name": "material", "value": "\"copper\"", "usedVars": [], "jsValue": "\"copper\""}]}, {"type": 14, "ID": "prod-ffmsnptfzc", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Set material to the tube joints"}]}, {"type": 0, "ID": "prod-wteife64x2k", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "joints", "jsValue": "joints_"}, {"name": "value", "value": "#pg ?@type==\"joint\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['type', null], '==', \"joint\")"}], "variable": "joints"}, {"type": 8, "ID": "prod-lqxh1ldbzo", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Color"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "joints", "usedVars": ["joints"], "jsValue": "joints_"}, {"name": "color", "value": "[0.7, 0.61, 0.5]", "usedVars": [], "jsValue": "[0.7, 0.61, 0.5]"}], "selectGeom": false}, {"type": 8, "ID": "prod-i5ojy16yxar", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Edge"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "joints", "usedVars": ["joints"], "jsValue": "joints_"}, {"name": "method", "value": "'hidden'", "jsValue": "'hidden'", "usedVars": []}]}, {"type": 8, "ID": "prod-bmiavg0gj4", "enabled": true, "print": false, "meta": {"module": "material", "name": "Set"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "joints", "usedVars": ["joints"], "jsValue": "joints_"}, {"name": "material", "value": "\"copper\"", "usedVars": [], "jsValue": "\"copper\""}], "selectGeom": false}, {"type": 14, "ID": "prod-ed8ms9nfg4", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Set material to the sun"}], "selectGeom": false}, {"type": 0, "ID": "prod-9p2t6sekk1d", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "sun", "jsValue": "sun_"}, {"name": "value", "value": "#pg ?@type==\"sun\"", "usedVars": [], "jsValue": "__modules__.query.Filter(__params__.model,  __modules__.query.Get(__params__.model, 'pg', null), ['type', null], '==', \"sun\")"}], "variable": "sun"}, {"type": 8, "ID": "prod-5xfkwg8va0u", "enabled": true, "print": false, "meta": {"module": "material", "name": "MeshMat"}, "argCount": 7, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "name", "value": "\"sun\"", "usedVars": [], "jsValue": "\"sun\""}, {"name": "color", "value": "[1, 0.95, 0.7]", "usedVars": [], "jsValue": "[1, 0.95, 0.7]"}, {"name": "opacity", "value": "1", "usedVars": [], "jsValue": "1"}, {"name": "select_side", "value": "'both'", "jsValue": "'both'", "usedVars": []}, {"name": "select_vert_colors", "value": "'none'", "jsValue": "'none'", "usedVars": []}], "selectGeom": false}, {"type": 8, "ID": "prod-b4dh00i5xq", "enabled": true, "print": false, "meta": {"module": "material", "name": "Physical"}, "argCount": 7, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "name", "value": "\"sun\"", "usedVars": [], "jsValue": "\"sun\""}, {"name": "emissive", "value": "[0, 0, 0]", "usedVars": [], "jsValue": "[0, 0, 0]"}, {"name": "roughness", "value": "0", "usedVars": [], "jsValue": "0"}, {"name": "metalness", "value": "0", "usedVars": [], "jsValue": "0"}, {"name": "reflectivity", "value": "1", "usedVars": [], "jsValue": "1"}], "selectGeom": false}, {"type": 8, "ID": "prod-w41x6rv1e2s", "enabled": true, "print": false, "meta": {"module": "material", "name": "Set"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "sun", "usedVars": ["sun"], "jsValue": "sun_"}, {"name": "material", "value": "\"sun\"", "usedVars": [], "jsValue": "\"sun\""}]}, {"type": 8, "ID": "prod-52og4ne32pl", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Mesh"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "sun", "usedVars": ["sun"], "jsValue": "sun_"}, {"name": "method", "value": "'smooth'", "jsValue": "'smooth'", "usedVars": []}], "selectGeom": false}, {"type": 8, "ID": "prod-puf1c9hkrge", "enabled": true, "print": false, "meta": {"module": "visualize", "name": "Edge"}, "argCount": 4, "args": [{"name": "__none__"}, {"name": "__model__"}, {"name": "entities", "value": "sun", "usedVars": ["sun"], "jsValue": "sun_"}, {"name": "method", "value": "'hidden'", "jsValue": "'hidden'", "usedVars": []}], "terminate": false, "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "HUD", "id": "node_e2sdgwnpu9e", "position": {"x": 5240, "y": 5500}, "enabled": true, "type": "", "procedure": [{"type": 13, "ID": "main_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 14, "ID": "prod-g8yjrvipmjr", "enabled": true, "print": false, "argCount": 1, "args": [{"name": "comment", "value": "Add the head up display"}], "selectGeom": false}, {"type": 0, "ID": "prod-7korh11e8u5", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "line1", "jsValue": "line1_"}, {"name": "value", "value": "\"Total Number of Tubes: \" + NUM_TUBE * TUBE_LAYER", "usedVars": ["TUBE_LAYER", "NUM_TUBE"], "jsValue": "\"Total Number of Tubes: \" + NUM_TUBE_ * TUBE_LAYER_"}], "variable": "line1", "selectGeom": false}, {"type": 0, "ID": "prod-gggtnzp6ywn", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "line2", "jsValue": "line2_"}, {"name": "value", "value": "\"Standard Tube Size: \" + round(@tube_size , 3) + \" unit\"", "usedVars": [], "jsValue": "\"Standard Tube Size: \" + round(__debug__,  __modules__.attrib.Get(__params__.model, null, 'tube_size'), 3) + \" unit\""}], "variable": "line2", "selectGeom": false}, {"type": 0, "ID": "prod-lrbdrkvdrs", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "line3", "jsValue": "line3_"}, {"name": "value", "value": "\"Floor Area: \" + round(@floor_area ) + \" unit<sup>2</sup>\"", "usedVars": [], "jsValue": "\"Floor Area: \" + round(__debug__,  __modules__.attrib.Get(__params__.model, null, 'floor_area')) + \" unit<sup>2</sup>\""}], "variable": "line3", "selectGeom": false}, {"type": 0, "ID": "prod-58944sqvgxi", "enabled": true, "print": false, "argCount": 2, "args": [{"name": "var_name", "value": "@hud", "jsValue": "@hud", "usedVars": []}, {"name": "value", "value": "line1 + \"\\n\" + line2 + \"\\n\" + line3", "usedVars": ["line1", "line2", "line3"], "jsValue": "line1_ + \"\\n\" + line2_ + \"\\n\" + line3_"}], "variable": null, "selectGeom": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [{"source": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output", "target": {"name": "input", "type": 0, "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"], "meta": {"mode": 0, "opts": {}}, "parentNode": {"name": "End", "id": "node_3zjubaznpbu", "position": {"x": 5240, "y": 5620}, "enabled": true, "type": "end", "procedure": [{"type": 13, "ID": "", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}, {"type": 11, "ID": "Return", "meta": {"name": "", "module": ""}, "argCount": 2, "args": [{"name": "__model__", "value": "", "jsValue": ""}, {"name": "value", "value": "", "jsValue": "", "usedVars": []}], "print": false, "enabled": true, "terminate": false}], "localFunc": [{"type": 13, "ID": "local_func_blank", "meta": {"name": "", "module": ""}, "argCount": 0, "args": [], "print": false, "enabled": true, "selectGeom": false}], "state": {"procedure": [], "show_code": true, "show_func": true}, "input": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target", "output": {"name": "output", "type": 1, "edges": [], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 12}}, "selected": false}], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 11}}, "selected": false}], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 10}}, "selected": false}, "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input~edges~0"], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 8}}, "selected": false}], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 5}}, "selected": false}, "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~input~edges~0"], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 4}}, "selected": false}], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0~output~edges~0~target~parentNode"}, "hasError": false, "hasExecuted": true, "model": 3}}, "selected": false}, "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input~edges~0"], "meta": {"mode": 0}, "parentNode": "~flowchart~nodes~0"}, "hasError": false, "hasExecuted": true, "model": 2}, "~flowchart~nodes~0~output~edges~0~target~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode"], "edges": ["~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~2", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1", "~flowchart~nodes~0~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~edges~1~source~parentNode~input~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0", "~flowchart~nodes~0~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0~target~parentNode~output~edges~0"], "functions": [], "ordered": true, "last_updated": "2021-03-26T06:34:50.316Z"}, "version": "0.7.5", "settings": "{\"normals\":{\"show\":false,\"size\":5},\"axes\":{\"show\":true,\"size\":50},\"grid\":{\"show\":true,\"size\":1240,\"pos_x\":295,\"pos_y\":395,\"pos_z\":-1,\"pos\":{\"x\":295,\"y\":395,\"z\":-1}},\"background\":{\"show\":true,\"background_set\":0},\"positions\":{\"show\":true,\"size\":8},\"tjs_summary\":{\"show\":false},\"gi_summary\":{\"show\":false},\"wireframe\":{\"show\":false},\"camera\":{\"pos\":{\"x\":5.104180844800039,\"y\":-32.199026205590485,\"z\":26.291473187601333},\"target\":{\"x\":0,\"y\":0,\"z\":0},\"ortho\":false},\"colors\":{\"viewer_bg\":\"#E6E6E6\",\"position\":\"#000000\",\"position_s\":\"#0033FF\",\"vertex_s\":\"#FFCC00\",\"face_f\":\"#FFFFFF\",\"face_f_s\":\"#4949BD\",\"face_b\":\"#DDDDDD\",\"face_b_s\":\"#00006D\"},\"ambient_light\":{\"show\":true,\"color\":\"#FFFFFF\",\"intensity\":0.5},\"hemisphere_light\":{\"show\":true,\"helper\":false,\"skyColor\":\"#FFFFFF\",\"groundColor\":\"#FFFFFF\",\"intensity\":0.5},\"directional_light\":{\"show\":false,\"helper\":false,\"color\":\"#FFFFFF\",\"intensity\":1,\"shadow\":true,\"azimuth\":90,\"altitude\":45,\"distance\":10,\"type\":\"directional\",\"shadowSize\":2048},\"ground\":{\"show\":false,\"width\":1000,\"length\":1000,\"height\":-0.5,\"color\":\"#FFFFFF\",\"shininess\":0},\"select\":{\"selector\":{\"id\":7,\"name\":\"Polygons\"},\"tab\":\"0\",\"enabledselector\":{\"ps\":true,\"_v\":true,\"_e\":true,\"_w\":true,\"_f\":true,\"pt\":true,\"pl\":true,\"pg\":true,\"co\":true}},\"version\":\"0.5.12\",\"cesium\":{\"imagery\":{\"layer\":\"Open Street Map\",\"terrain\":\"Ellipsoid\",\"apiKey\":{\"here\":\"7vMRjLNCpcOAUQXU61eUp6EFbWCy7WLNmy9qLHO-1Bw\"}},\"camera\":{\"pos\":{\"x\":0,\"y\":0,\"z\":0},\"direction\":{\"x\":0,\"y\":0,\"z\":0},\"up\":{\"x\":0,\"y\":0,\"z\":0},\"right\":{\"x\":0,\"y\":0,\"z\":0}},\"time\":{\"date\":\"2020-05-11\"},\"model\":{\"polygonEdge\":true},\"updated\":true},\"geo\":{\"imagery\":{\"layer\":\"Open Street Map\",\"terrain\":\"Ellipsoid\"},\"camera\":{\"pos\":{\"x\":-1527170.4564504684,\"y\":6191377.229851589,\"z\":142492.86697965642},\"direction\":{\"x\":0,\"y\":0,\"z\":0},\"up\":{\"x\":0,\"y\":0,\"z\":0},\"right\":{\"x\":0,\"y\":0,\"z\":0},\"rot\":{\"x\":-2.8946890807177175,\"y\":0.03332128705035884,\"z\":2.8868931928931136}},\"time\":{\"date\":\"2021-01-27T16:00\"},\"model\":{\"polygonEdge\":false},\"updated\":true}}"}